{
    "vyos.vyos.vyos_interfaces": {
        "doc": {
            "author": [
                "Nilashish Chakraborty (@nilashishc)",
                "Rohit Thakur (@rohitthakur2590)"
            ],
            "collection": "vyos.vyos",
            "description": [
                "This module manages the interface attributes on VyOS network devices.",
                "This module supports managing base attributes of Ethernet, Bonding, VXLAN, Loopback and Virtual Tunnel Interfaces."
            ],
            "filename": "/Users/ssbarnea/.pyenv/versions/3.9.2/lib/python3.9/site-packages/ansible_collections/vyos/vyos/plugins/modules/vyos_interfaces.py",
            "has_action": true,
            "module": "vyos_interfaces",
            "notes": [
                "Tested against VyOS 1.1.8 (helium).",
                "This module works with connection C(network_cli). See L(the VyOS OS Platform Options,../network/user_guide/platform_vyos.html)."
            ],
            "options": {
                "config": {
                    "description": "The provided interfaces configuration.",
                    "elements": "dict",
                    "suboptions": {
                        "description": {
                            "description": [
                                "Interface description."
                            ],
                            "type": "str"
                        },
                        "duplex": {
                            "choices": [
                                "full",
                                "half",
                                "auto"
                            ],
                            "description": [
                                "Interface duplex mode.",
                                "Applicable for Ethernet interfaces only."
                            ],
                            "type": "str"
                        },
                        "enabled": {
                            "default": true,
                            "description": [
                                "Administrative state of the interface.",
                                "Set the value to C(true) to administratively enable the interface or C(false) to disable it."
                            ],
                            "type": "bool"
                        },
                        "mtu": {
                            "description": [
                                "MTU for a specific interface. Refer to vendor documentation for valid values.",
                                "Applicable for Ethernet, Bonding, VXLAN and Virtual Tunnel interfaces."
                            ],
                            "type": "int"
                        },
                        "name": {
                            "description": [
                                "Full name of the interface, e.g. eth0, eth1, bond0, vti1, vxlan2."
                            ],
                            "required": true,
                            "type": "str"
                        },
                        "speed": {
                            "choices": [
                                "auto",
                                "10",
                                "100",
                                "1000",
                                "2500",
                                "10000"
                            ],
                            "description": [
                                "Interface link speed.",
                                "Applicable for Ethernet interfaces only."
                            ],
                            "type": "str"
                        },
                        "vifs": {
                            "description": [
                                "Virtual sub-interfaces related configuration.",
                                "802.1Q VLAN interfaces are represented as virtual sub-interfaces in VyOS."
                            ],
                            "elements": "dict",
                            "suboptions": {
                                "description": {
                                    "description": [
                                        "Virtual sub-interface description."
                                    ],
                                    "type": "str"
                                },
                                "enabled": {
                                    "default": true,
                                    "description": [
                                        "Administrative state of the virtual sub-interface.",
                                        "Set the value to C(true) to administratively enable the interface or C(false) to disable it."
                                    ],
                                    "type": "bool"
                                },
                                "mtu": {
                                    "description": [
                                        "MTU for the virtual sub-interface.",
                                        "Refer to vendor documentation for valid values."
                                    ],
                                    "type": "int"
                                },
                                "vlan_id": {
                                    "description": [
                                        "Identifier for the virtual sub-interface."
                                    ],
                                    "type": "int"
                                }
                            },
                            "type": "list"
                        }
                    },
                    "type": "list"
                },
                "running_config": {
                    "description": [
                        "This option is used only with state I(parsed).",
                        "The value of this option should be the output received from the VyOS device by executing the command B(show configuration commands | grep interfaces).",
                        "The state I(parsed) reads the configuration from C(running_config) option and transforms it into Ansible structured data as per the resource module's argspec and the value is then returned in the I(parsed) key within the result."
                    ],
                    "type": "str"
                },
                "state": {
                    "choices": [
                        "merged",
                        "replaced",
                        "overridden",
                        "deleted",
                        "rendered",
                        "gathered",
                        "parsed"
                    ],
                    "default": "merged",
                    "description": [
                        "The state of the configuration after module completion."
                    ],
                    "type": "str"
                }
            },
            "short_description": "Interfaces resource module",
            "version_added": "1.0.0",
            "version_added_collection": "vyos.vyos"
        },
        "examples": "\n# Using merged\n#\n# -------------\n# Before state:\n# -------------\n#\n# vyos@vyos:~$ show configuration commands | grep interfaces\n# set interfaces ethernet eth0 address 'dhcp'\n# set interfaces ethernet eth0 address 'dhcpv6'\n# set interfaces ethernet eth0 duplex 'auto'\n# set interfaces ethernet eth0 hw-id '08:00:27:30:f0:22'\n# set interfaces ethernet eth0 smp-affinity 'auto'\n# set interfaces ethernet eth0 speed 'auto'\n# set interfaces ethernet eth1 hw-id '08:00:27:ea:0f:b9'\n# set interfaces ethernet eth1 smp-affinity 'auto'\n# set interfaces ethernet eth2 hw-id '08:00:27:c2:98:23'\n# set interfaces ethernet eth2 smp-affinity 'auto'\n# set interfaces ethernet eth3 hw-id '08:00:27:43:70:8c'\n# set interfaces loopback lo\n\n- name: Merge provided configuration with device configuration\n  vyos.vyos.vyos_interfaces:\n    config:\n    - name: eth2\n      description: Configured by Ansible\n      enabled: true\n      vifs:\n      - vlan_id: 200\n        description: VIF 200 - ETH2\n\n    - name: eth3\n      description: Configured by Ansible\n      mtu: 1500\n\n    - name: bond1\n      description: Bond - 1\n      mtu: 1200\n\n    - name: vti2\n      description: VTI - 2\n      enabled: false\n    state: merged\n#\n#\n# -------------------------\n# Module Execution Result\n# -------------------------\n#\n# \"before\": [\n#      \t{\n#            \"enabled\": true,\n#            \"name\": \"lo\"\n#      \t},\n#       {\n#            \"enabled\": true,\n#            \"name\": \"eth3\"\n#        },\n#        {\n#            \"enabled\": true,\n#            \"name\": \"eth2\"\n#        },\n#        {\n#            \"enabled\": true,\n#            \"name\": \"eth1\"\n#        },\n#        {\n#            \"duplex\": \"auto\",\n#            \"enabled\": true,\n#            \"name\": \"eth0\",\n#            \"speed\": \"auto\"\n#        }\n#    ]\n#\n# \"commands\": [\n#        \"set interfaces ethernet eth2 description 'Configured by Ansible'\",\n#        \"set interfaces ethernet eth2 vif 200\",\n#        \"set interfaces ethernet eth2 vif 200 description 'VIF 200 - ETH2'\",\n#        \"set interfaces ethernet eth3 description 'Configured by Ansible'\",\n#        \"set interfaces ethernet eth3 mtu '1500'\",\n#        \"set interfaces bonding bond1\",\n#        \"set interfaces bonding bond1 description 'Bond - 1'\",\n#        \"set interfaces bonding bond1 mtu '1200'\",\n#        \"set interfaces vti vti2\",\n#        \"set interfaces vti vti2 description 'VTI - 2'\",\n#        \"set interfaces vti vti2 disable\"\n#    ]\n#\n# \"after\": [\n#        {\n#            \"description\": \"Bond - 1\",\n#            \"enabled\": true,\n#            \"mtu\": 1200,\n#            \"name\": \"bond1\"\n#        },\n#        {\n#            \"enabled\": true,\n#            \"name\": \"lo\"\n#        },\n#        {\n#            \"description\": \"VTI - 2\",\n#            \"enabled\": false,\n#            \"name\": \"vti2\"\n#        },\n#        {\n#            \"description\": \"Configured by Ansible\",\n#            \"enabled\": true,\n#            \"mtu\": 1500,\n#            \"name\": \"eth3\"\n#        },\n#        {\n#            \"description\": \"Configured by Ansible\",\n#            \"enabled\": true,\n#            \"name\": \"eth2\",\n#            \"vifs\": [\n#                {\n#                    \"description\": \"VIF 200 - ETH2\",\n#                    \"enabled\": true,\n#                    \"vlan_id\": \"200\"\n#                }\n#            ]\n#        },\n#        {\n#            \"enabled\": true,\n#            \"name\": \"eth1\"\n#        },\n#        {\n#            \"duplex\": \"auto\",\n#            \"enabled\": true,\n#            \"name\": \"eth0\",\n#            \"speed\": \"auto\"\n#        }\n#    ]\n#\n#\n# -------------\n# After state:\n# -------------\n#\n# vyos@vyos:~$ show configuration commands | grep interfaces\n# set interfaces bonding bond1 description 'Bond - 1'\n# set interfaces bonding bond1 mtu '1200'\n# set interfaces ethernet eth0 address 'dhcp'\n# set interfaces ethernet eth0 address 'dhcpv6'\n# set interfaces ethernet eth0 duplex 'auto'\n# set interfaces ethernet eth0 hw-id '08:00:27:30:f0:22'\n# set interfaces ethernet eth0 smp-affinity 'auto'\n# set interfaces ethernet eth0 speed 'auto'\n# set interfaces ethernet eth1 hw-id '08:00:27:ea:0f:b9'\n# set interfaces ethernet eth1 smp-affinity 'auto'\n# set interfaces ethernet eth2 description 'Configured by Ansible'\n# set interfaces ethernet eth2 hw-id '08:00:27:c2:98:23'\n# set interfaces ethernet eth2 smp-affinity 'auto'\n# set interfaces ethernet eth2 vif 200 description 'VIF 200 - ETH2'\n# set interfaces ethernet eth3 description 'Configured by Ansible'\n# set interfaces ethernet eth3 hw-id '08:00:27:43:70:8c'\n# set interfaces ethernet eth3 mtu '1500'\n# set interfaces loopback lo\n# set interfaces vti vti2 description 'VTI - 2'\n# set interfaces vti vti2 disable\n#\n\n\n# Using replaced\n#\n# -------------\n# Before state:\n# -------------\n#\n# vyos:~$ show configuration commands | grep eth\n# set interfaces bonding bond1 description 'Bond - 1'\n# set interfaces bonding bond1 mtu '1400'\n# set interfaces ethernet eth0 address 'dhcp'\n# set interfaces ethernet eth0 description 'Management Interface for the Appliance'\n# set interfaces ethernet eth0 duplex 'auto'\n# set interfaces ethernet eth0 hw-id '08:00:27:f3:6c:b5'\n# set interfaces ethernet eth0 smp_affinity 'auto'\n# set interfaces ethernet eth0 speed 'auto'\n# set interfaces ethernet eth1 description 'Configured by Ansible Eng Team'\n# set interfaces ethernet eth1 duplex 'full'\n# set interfaces ethernet eth1 hw-id '08:00:27:ad:ef:65'\n# set interfaces ethernet eth1 smp_affinity 'auto'\n# set interfaces ethernet eth1 speed '100'\n# set interfaces ethernet eth2 description 'Configured by Ansible'\n# set interfaces ethernet eth2 duplex 'full'\n# set interfaces ethernet eth2 hw-id '08:00:27:ab:4e:79'\n# set interfaces ethernet eth2 mtu '500'\n# set interfaces ethernet eth2 smp_affinity 'auto'\n# set interfaces ethernet eth2 speed '100'\n# set interfaces ethernet eth2 vif 200 description 'Configured by Ansible'\n# set interfaces ethernet eth3 description 'Configured by Ansible'\n# set interfaces ethernet eth3 duplex 'full'\n# set interfaces ethernet eth3 hw-id '08:00:27:17:3c:85'\n# set interfaces ethernet eth3 mtu '1500'\n# set interfaces ethernet eth3 smp_affinity 'auto'\n# set interfaces ethernet eth3 speed '100'\n# set interfaces loopback lo\n#\n#\n- name: Replace device configurations of listed interfaces with provided configurations\n  vyos.vyos.vyos_interfaces:\n    config:\n    - name: eth2\n      description: Replaced by Ansible\n\n    - name: eth3\n      description: Replaced by Ansible\n\n    - name: eth1\n      description: Replaced by Ansible\n    state: replaced\n#\n#\n# -----------------------\n# Module Execution Result\n# -----------------------\n#\n# \"before\": [\n#        {\n#            \"description\": \"Bond - 1\",\n#            \"enabled\": true,\n#            \"mtu\": 1400,\n#            \"name\": \"bond1\"\n#        },\n#        {\n#            \"enabled\": true,\n#            \"name\": \"lo\"\n#        },\n#        {\n#            \"description\": \"Configured by Ansible\",\n#            \"duplex\": \"full\",\n#            \"enabled\": true,\n#            \"mtu\": 1500,\n#            \"name\": \"eth3\",\n#            \"speed\": \"100\"\n#        },\n#        {\n#            \"description\": \"Configured by Ansible\",\n#            \"duplex\": \"full\",\n#            \"enabled\": true,\n#            \"mtu\": 500,\n#            \"name\": \"eth2\",\n#            \"speed\": \"100\",\n#            \"vifs\": [\n#                {\n#                    \"description\": \"VIF 200 - ETH2\",\n#                    \"enabled\": true,\n#                    \"vlan_id\": \"200\"\n#                }\n#            ]\n#        },\n#        {\n#            \"description\": \"Configured by Ansible Eng Team\",\n#            \"duplex\": \"full\",\n#            \"enabled\": true,\n#            \"name\": \"eth1\",\n#            \"speed\": \"100\"\n#        },\n#        {\n#            \"description\": \"Management Interface for the Appliance\",\n#            \"duplex\": \"auto\",\n#            \"enabled\": true,\n#            \"name\": \"eth0\",\n#            \"speed\": \"auto\"\n#        }\n#    ]\n#\n# \"commands\": [\n#        \"delete interfaces ethernet eth2 speed\",\n#        \"delete interfaces ethernet eth2 duplex\",\n#        \"delete interfaces ethernet eth2 mtu\",\n#        \"delete interfaces ethernet eth2 vif 200 description\",\n#        \"set interfaces ethernet eth2 description 'Replaced by Ansible'\",\n#        \"delete interfaces ethernet eth3 speed\",\n#        \"delete interfaces ethernet eth3 duplex\",\n#        \"delete interfaces ethernet eth3 mtu\",\n#        \"set interfaces ethernet eth3 description 'Replaced by Ansible'\",\n#        \"delete interfaces ethernet eth1 speed\",\n#        \"delete interfaces ethernet eth1 duplex\",\n#        \"set interfaces ethernet eth1 description 'Replaced by Ansible'\"\n#    ]\n#\n# \"after\": [\n#        {\n#            \"description\": \"Bond - 1\",\n#            \"enabled\": true,\n#            \"mtu\": 1400,\n#            \"name\": \"bond1\"\n#        },\n#        {\n#            \"enabled\": true,\n#            \"name\": \"lo\"\n#        },\n#        {\n#            \"description\": \"Replaced by Ansible\",\n#            \"enabled\": true,\n#            \"name\": \"eth3\"\n#        },\n#        {\n#            \"description\": \"Replaced by Ansible\",\n#            \"enabled\": true,\n#            \"name\": \"eth2\",\n#            \"vifs\": [\n#                {\n#                    \"enabled\": true,\n#                    \"vlan_id\": \"200\"\n#                }\n#            ]\n#        },\n#        {\n#            \"description\": \"Replaced by Ansible\",\n#            \"enabled\": true,\n#            \"name\": \"eth1\"\n#        },\n#        {\n#            \"description\": \"Management Interface for the Appliance\",\n#            \"duplex\": \"auto\",\n#            \"enabled\": true,\n#            \"name\": \"eth0\",\n#            \"speed\": \"auto\"\n#        }\n#    ]\n#\n#\n# -------------\n# After state:\n# -------------\n#\n# vyos@vyos:~$ show configuration commands | grep interfaces\n# set interfaces bonding bond1 description 'Bond - 1'\n# set interfaces bonding bond1 mtu '1400'\n# set interfaces ethernet eth0 address 'dhcp'\n# set interfaces ethernet eth0 address 'dhcpv6'\n# set interfaces ethernet eth0 description 'Management Interface for the Appliance'\n# set interfaces ethernet eth0 duplex 'auto'\n# set interfaces ethernet eth0 hw-id '08:00:27:30:f0:22'\n# set interfaces ethernet eth0 smp-affinity 'auto'\n# set interfaces ethernet eth0 speed 'auto'\n# set interfaces ethernet eth1 description 'Replaced by Ansible'\n# set interfaces ethernet eth1 hw-id '08:00:27:ea:0f:b9'\n# set interfaces ethernet eth1 smp-affinity 'auto'\n# set interfaces ethernet eth2 description 'Replaced by Ansible'\n# set interfaces ethernet eth2 hw-id '08:00:27:c2:98:23'\n# set interfaces ethernet eth2 smp-affinity 'auto'\n# set interfaces ethernet eth2 vif 200\n# set interfaces ethernet eth3 description 'Replaced by Ansible'\n# set interfaces ethernet eth3 hw-id '08:00:27:43:70:8c'\n# set interfaces loopback lo\n#\n#\n# Using overridden\n#\n#\n# --------------\n# Before state\n# --------------\n#\n# vyos@vyos:~$ show configuration commands | grep interfaces\n# set interfaces ethernet eth0 address 'dhcp'\n# set interfaces ethernet eth0 address 'dhcpv6'\n# set interfaces ethernet eth0 description 'Ethernet Interface - 0'\n# set interfaces ethernet eth0 duplex 'auto'\n# set interfaces ethernet eth0 hw-id '08:00:27:30:f0:22'\n# set interfaces ethernet eth0 mtu '1200'\n# set interfaces ethernet eth0 smp-affinity 'auto'\n# set interfaces ethernet eth0 speed 'auto'\n# set interfaces ethernet eth1 description 'Configured by Ansible Eng Team'\n# set interfaces ethernet eth1 hw-id '08:00:27:ea:0f:b9'\n# set interfaces ethernet eth1 mtu '100'\n# set interfaces ethernet eth1 smp-affinity 'auto'\n# set interfaces ethernet eth1 vif 100 description 'VIF 100 - ETH1'\n# set interfaces ethernet eth1 vif 100 disable\n# set interfaces ethernet eth2 description 'Configured by Ansible Team (Admin Down)'\n# set interfaces ethernet eth2 disable\n# set interfaces ethernet eth2 hw-id '08:00:27:c2:98:23'\n# set interfaces ethernet eth2 mtu '600'\n# set interfaces ethernet eth2 smp-affinity 'auto'\n# set interfaces ethernet eth3 description 'Configured by Ansible Network'\n# set interfaces ethernet eth3 hw-id '08:00:27:43:70:8c'\n# set interfaces loopback lo\n# set interfaces vti vti1 description 'Virtual Tunnel Interface - 1'\n# set interfaces vti vti1 mtu '68'\n#\n#\n- name: Overrides all device configuration with provided configuration\n  vyos.vyos.vyos_interfaces:\n    config:\n    - name: eth0\n      description: Outbound Interface For The Appliance\n      speed: auto\n      duplex: auto\n\n    - name: eth2\n      speed: auto\n      duplex: auto\n\n    - name: eth3\n      mtu: 1200\n    state: overridden\n#\n#\n# ------------------------\n# Module Execution Result\n# ------------------------\n#\n# \"before\": [\n#        {\n#            \"enabled\": true,\n#            \"name\": \"lo\"\n#        },\n#        {\n#            \"description\": \"Virtual Tunnel Interface - 1\",\n#            \"enabled\": true,\n#            \"mtu\": 68,\n#            \"name\": \"vti1\"\n#        },\n#        {\n#            \"description\": \"Configured by Ansible Network\",\n#            \"enabled\": true,\n#            \"name\": \"eth3\"\n#        },\n#        {\n#            \"description\": \"Configured by Ansible Team (Admin Down)\",\n#            \"enabled\": false,\n#            \"mtu\": 600,\n#            \"name\": \"eth2\"\n#        },\n#        {\n#            \"description\": \"Configured by Ansible Eng Team\",\n#            \"enabled\": true,\n#            \"mtu\": 100,\n#            \"name\": \"eth1\",\n#            \"vifs\": [\n#                {\n#                    \"description\": \"VIF 100 - ETH1\",\n#                    \"enabled\": false,\n#                    \"vlan_id\": \"100\"\n#                }\n#            ]\n#        },\n#        {\n#            \"description\": \"Ethernet Interface - 0\",\n#            \"duplex\": \"auto\",\n#            \"enabled\": true,\n#            \"mtu\": 1200,\n#            \"name\": \"eth0\",\n#            \"speed\": \"auto\"\n#        }\n#    ]\n#\n# \"commands\": [\n#        \"delete interfaces vti vti1 description\",\n#        \"delete interfaces vti vti1 mtu\",\n#        \"delete interfaces ethernet eth1 description\",\n#        \"delete interfaces ethernet eth1 mtu\",\n#        \"delete interfaces ethernet eth1 vif 100 description\",\n#        \"delete interfaces ethernet eth1 vif 100 disable\",\n#        \"delete interfaces ethernet eth0 mtu\",\n#        \"set interfaces ethernet eth0 description 'Outbound Interface For The Appliance'\",\n#        \"delete interfaces ethernet eth2 description\",\n#        \"delete interfaces ethernet eth2 mtu\",\n#        \"set interfaces ethernet eth2 duplex 'auto'\",\n#        \"delete interfaces ethernet eth2 disable\",\n#        \"set interfaces ethernet eth2 speed 'auto'\",\n#        \"delete interfaces ethernet eth3 description\",\n#        \"set interfaces ethernet eth3 mtu '1200'\"\n#    ],\n#\n# \"after\": [\n#        {\n#            \"enabled\": true,\n#            \"name\": \"lo\"\n#        },\n#        {\n#            \"enabled\": true,\n#            \"name\": \"vti1\"\n#        },\n#        {\n#            \"enabled\": true,\n#            \"mtu\": 1200,\n#            \"name\": \"eth3\"\n#        },\n#        {\n#            \"duplex\": \"auto\",\n#            \"enabled\": true,\n#            \"name\": \"eth2\",\n#            \"speed\": \"auto\"\n#        },\n#        {\n#            \"enabled\": true,\n#            \"name\": \"eth1\",\n#            \"vifs\": [\n#                {\n#                    \"enabled\": true,\n#                    \"vlan_id\": \"100\"\n#                }\n#            ]\n#        },\n#        {\n#            \"description\": \"Outbound Interface For The Appliance\",\n#            \"duplex\": \"auto\",\n#            \"enabled\": true,\n#            \"name\": \"eth0\",\n#            \"speed\": \"auto\"\n#        }\n#    ]\n#\n#\n# ------------\n# After state\n# ------------\n#\n# vyos@vyos:~$ show configuration commands | grep interfaces\n# set interfaces ethernet eth0 address 'dhcp'\n# set interfaces ethernet eth0 address 'dhcpv6'\n# set interfaces ethernet eth0 description 'Outbound Interface For The Appliance'\n# set interfaces ethernet eth0 duplex 'auto'\n# set interfaces ethernet eth0 hw-id '08:00:27:30:f0:22'\n# set interfaces ethernet eth0 smp-affinity 'auto'\n# set interfaces ethernet eth0 speed 'auto'\n# set interfaces ethernet eth1 hw-id '08:00:27:ea:0f:b9'\n# set interfaces ethernet eth1 smp-affinity 'auto'\n# set interfaces ethernet eth1 vif 100\n# set interfaces ethernet eth2 duplex 'auto'\n# set interfaces ethernet eth2 hw-id '08:00:27:c2:98:23'\n# set interfaces ethernet eth2 smp-affinity 'auto'\n# set interfaces ethernet eth2 speed 'auto'\n# set interfaces ethernet eth3 hw-id '08:00:27:43:70:8c'\n# set interfaces ethernet eth3 mtu '1200'\n# set interfaces loopback lo\n# set interfaces vti vti1\n#\n#\n# Using deleted\n#\n#\n# -------------\n# Before state\n# -------------\n#\n# vyos@vyos:~$ show configuration commands | grep interfaces\n# set interfaces bonding bond0 mtu '1300'\n# set interfaces bonding bond1 description 'LAG - 1'\n# set interfaces ethernet eth0 address 'dhcp'\n# set interfaces ethernet eth0 address 'dhcpv6'\n# set interfaces ethernet eth0 description 'Outbound Interface for this appliance'\n# set interfaces ethernet eth0 duplex 'auto'\n# set interfaces ethernet eth0 hw-id '08:00:27:30:f0:22'\n# set interfaces ethernet eth0 smp-affinity 'auto'\n# set interfaces ethernet eth0 speed 'auto'\n# set interfaces ethernet eth1 description 'Configured by Ansible Network'\n# set interfaces ethernet eth1 duplex 'full'\n# set interfaces ethernet eth1 hw-id '08:00:27:ea:0f:b9'\n# set interfaces ethernet eth1 smp-affinity 'auto'\n# set interfaces ethernet eth1 speed '100'\n# set interfaces ethernet eth2 description 'Configured by Ansible'\n# set interfaces ethernet eth2 disable\n# set interfaces ethernet eth2 duplex 'full'\n# set interfaces ethernet eth2 hw-id '08:00:27:c2:98:23'\n# set interfaces ethernet eth2 mtu '600'\n# set interfaces ethernet eth2 smp-affinity 'auto'\n# set interfaces ethernet eth2 speed '100'\n# set interfaces ethernet eth3 description 'Configured by Ansible Network'\n# set interfaces ethernet eth3 duplex 'full'\n# set interfaces ethernet eth3 hw-id '08:00:27:43:70:8c'\n# set interfaces ethernet eth3 speed '100'\n# set interfaces loopback lo\n#\n#\n- name: Delete attributes of given interfaces (Note - This won't delete the interfaces\n    themselves)\n  vyos.vyos.vyos_interfaces:\n    config:\n    - name: bond1\n\n    - name: eth1\n\n    - name: eth2\n\n    - name: eth3\n    state: deleted\n#\n#\n# ------------------------\n# Module Execution Results\n# ------------------------\n#\n# \"before\": [\n#        {\n#            \"enabled\": true,\n#            \"mtu\": 1300,\n#            \"name\": \"bond0\"\n#        },\n#        {\n#            \"description\": \"LAG - 1\",\n#            \"enabled\": true,\n#            \"name\": \"bond1\"\n#        },\n#        {\n#            \"enabled\": true,\n#            \"name\": \"lo\"\n#        },\n#        {\n#            \"description\": \"Configured by Ansible Network\",\n#            \"duplex\": \"full\",\n#            \"enabled\": true,\n#            \"name\": \"eth3\",\n#            \"speed\": \"100\"\n#        },\n#        {\n#            \"description\": \"Configured by Ansible\",\n#            \"duplex\": \"full\",\n#            \"enabled\": false,\n#            \"mtu\": 600,\n#            \"name\": \"eth2\",\n#            \"speed\": \"100\"\n#        },\n#        {\n#            \"description\": \"Configured by Ansible Network\",\n#            \"duplex\": \"full\",\n#            \"enabled\": true,\n#            \"name\": \"eth1\",\n#            \"speed\": \"100\"\n#        },\n#        {\n#            \"description\": \"Outbound Interface for this appliance\",\n#            \"duplex\": \"auto\",\n#            \"enabled\": true,\n#            \"name\": \"eth0\",\n#            \"speed\": \"auto\"\n#        }\n#    ]\n#\n# \"commands\": [\n#        \"delete interfaces bonding bond1 description\",\n#        \"delete interfaces ethernet eth1 speed\",\n#        \"delete interfaces ethernet eth1 duplex\",\n#        \"delete interfaces ethernet eth1 description\",\n#        \"delete interfaces ethernet eth2 speed\",\n#        \"delete interfaces ethernet eth2 disable\",\n#        \"delete interfaces ethernet eth2 duplex\",\n#        \"delete interfaces ethernet eth2 disable\",\n#        \"delete interfaces ethernet eth2 description\",\n#        \"delete interfaces ethernet eth2 disable\",\n#        \"delete interfaces ethernet eth2 mtu\",\n#        \"delete interfaces ethernet eth2 disable\",\n#        \"delete interfaces ethernet eth3 speed\",\n#        \"delete interfaces ethernet eth3 duplex\",\n#        \"delete interfaces ethernet eth3 description\"\n#    ]\n#\n# \"after\": [\n#        {\n#            \"enabled\": true,\n#            \"mtu\": 1300,\n#            \"name\": \"bond0\"\n#        },\n#        {\n#            \"enabled\": true,\n#            \"name\": \"bond1\"\n#        },\n#        {\n#            \"enabled\": true,\n#            \"name\": \"lo\"\n#        },\n#        {\n#            \"enabled\": true,\n#            \"name\": \"eth3\"\n#        },\n#        {\n#            \"enabled\": true,\n#            \"name\": \"eth2\"\n#        },\n#        {\n#            \"enabled\": true,\n#            \"name\": \"eth1\"\n#        },\n#        {\n#            \"description\": \"Outbound Interface for this appliance\",\n#            \"duplex\": \"auto\",\n#            \"enabled\": true,\n#            \"name\": \"eth0\",\n#            \"speed\": \"auto\"\n#        }\n#    ]\n#\n#\n# ------------\n# After state\n# ------------\n#\n# vyos@vyos:~$ show configuration commands | grep interfaces\n# set interfaces bonding bond0 mtu '1300'\n# set interfaces bonding bond1\n# set interfaces ethernet eth0 address 'dhcp'\n# set interfaces ethernet eth0 address 'dhcpv6'\n# set interfaces ethernet eth0 description 'Outbound Interface for this appliance'\n# set interfaces ethernet eth0 duplex 'auto'\n# set interfaces ethernet eth0 hw-id '08:00:27:30:f0:22'\n# set interfaces ethernet eth0 smp-affinity 'auto'\n# set interfaces ethernet eth0 speed 'auto'\n# set interfaces ethernet eth1 hw-id '08:00:27:ea:0f:b9'\n# set interfaces ethernet eth1 smp-affinity 'auto'\n# set interfaces ethernet eth2 hw-id '08:00:27:c2:98:23'\n# set interfaces ethernet eth2 smp-affinity 'auto'\n# set interfaces ethernet eth3 hw-id '08:00:27:43:70:8c'\n# set interfaces loopback lo\n#\n#\n\n\n# Using gathered\n#\n# Before state:\n# -------------\n#\n# vyos@192# run show configuration commands | grep interfaces\n# set interfaces ethernet eth0 address 'dhcp'\n# set interfaces ethernet eth0 duplex 'auto'\n# set interfaces ethernet eth0 hw-id '08:00:27:50:5e:19'\n# set interfaces ethernet eth0 smp_affinity 'auto'\n# set interfaces ethernet eth0 speed 'auto'\n# set interfaces ethernet eth1 description 'Configured by Ansible'\n# set interfaces ethernet eth1 duplex 'auto'\n# set interfaces ethernet eth1 mtu '1500'\n# set interfaces ethernet eth1 speed 'auto'\n# set interfaces ethernet eth1 vif 200 description 'VIF - 200'\n# set interfaces ethernet eth2 description 'Configured by Ansible'\n# set interfaces ethernet eth2 duplex 'auto'\n# set interfaces ethernet eth2 mtu '1500'\n# set interfaces ethernet eth2 speed 'auto'\n# set interfaces ethernet eth2 vif 200 description 'VIF - 200'\n#\n- name: Gather listed interfaces with provided configurations\n  vyos.vyos.vyos_interfaces:\n    config:\n    state: gathered\n#\n#\n# -------------------------\n# Module Execution Result\n# -------------------------\n#\n#    \"gathered\": [\n#         {\n#             \"description\": \"Configured by Ansible\",\n#             \"duplex\": \"auto\",\n#             \"enabled\": true,\n#             \"mtu\": 1500,\n#             \"name\": \"eth2\",\n#             \"speed\": \"auto\",\n#             \"vifs\": [\n#                 {\n#                     \"description\": \"VIF - 200\",\n#                     \"enabled\": true,\n#                     \"vlan_id\": 200\n#                 }\n#             ]\n#         },\n#         {\n#             \"description\": \"Configured by Ansible\",\n#             \"duplex\": \"auto\",\n#             \"enabled\": true,\n#             \"mtu\": 1500,\n#             \"name\": \"eth1\",\n#             \"speed\": \"auto\",\n#             \"vifs\": [\n#                 {\n#                     \"description\": \"VIF - 200\",\n#                     \"enabled\": true,\n#                     \"vlan_id\": 200\n#                 }\n#             ]\n#         },\n#         {\n#             \"duplex\": \"auto\",\n#             \"enabled\": true,\n#             \"name\": \"eth0\",\n#             \"speed\": \"auto\"\n#         }\n#     ]\n#\n#\n# After state:\n# -------------\n#\n# vyos@192# run show configuration commands | grep interfaces\n# set interfaces ethernet eth0 address 'dhcp'\n# set interfaces ethernet eth0 duplex 'auto'\n# set interfaces ethernet eth0 hw-id '08:00:27:50:5e:19'\n# set interfaces ethernet eth0 smp_affinity 'auto'\n# set interfaces ethernet eth0 speed 'auto'\n# set interfaces ethernet eth1 description 'Configured by Ansible'\n# set interfaces ethernet eth1 duplex 'auto'\n# set interfaces ethernet eth1 mtu '1500'\n# set interfaces ethernet eth1 speed 'auto'\n# set interfaces ethernet eth1 vif 200 description 'VIF - 200'\n# set interfaces ethernet eth2 description 'Configured by Ansible'\n# set interfaces ethernet eth2 duplex 'auto'\n# set interfaces ethernet eth2 mtu '1500'\n# set interfaces ethernet eth2 speed 'auto'\n# set interfaces ethernet eth2 vif 200 description 'VIF - 200'\n\n\n# Using rendered\n#\n#\n- name: Render the commands for provided  configuration\n  vyos.vyos.vyos_interfaces:\n    config:\n    - name: eth0\n      enabled: true\n      duplex: auto\n      speed: auto\n    - name: eth1\n      description: Configured by Ansible - Interface 1\n      mtu: 1500\n      speed: auto\n      duplex: auto\n      enabled: true\n      vifs:\n      - vlan_id: 100\n        description: Eth1 - VIF 100\n        mtu: 400\n        enabled: true\n      - vlan_id: 101\n        description: Eth1 - VIF 101\n        enabled: true\n    - name: eth2\n      description: Configured by Ansible - Interface 2 (ADMIN DOWN)\n      mtu: 600\n      enabled: false\n    state: rendered\n#\n#\n# -------------------------\n# Module Execution Result\n# -------------------------\n#\n#\n# \"rendered\": [\n#         \"set interfaces ethernet eth0 duplex 'auto'\",\n#         \"set interfaces ethernet eth0 speed 'auto'\",\n#         \"delete interfaces ethernet eth0 disable\",\n#         \"set interfaces ethernet eth1 duplex 'auto'\",\n#         \"delete interfaces ethernet eth1 disable\",\n#         \"set interfaces ethernet eth1 speed 'auto'\",\n#         \"set interfaces ethernet eth1 description 'Configured by Ansible - Interface 1'\",\n#         \"set interfaces ethernet eth1 mtu '1500'\",\n#         \"set interfaces ethernet eth1 vif 100 description 'Eth1 - VIF 100'\",\n#         \"set interfaces ethernet eth1 vif 100 mtu '400'\",\n#         \"set interfaces ethernet eth1 vif 101 description 'Eth1 - VIF 101'\",\n#         \"set interfaces ethernet eth2 disable\",\n#         \"set interfaces ethernet eth2 description 'Configured by Ansible - Interface 2 (ADMIN DOWN)'\",\n#         \"set interfaces ethernet eth2 mtu '600'\"\n#     ]\n\n\n# Using parsed\n#\n#\n- name: Parse the configuration.\n  vyos.vyos.vyos_interfaces:\n    running_config:\n      \"set interfaces ethernet eth0 address 'dhcp'\n       set interfaces ethernet eth0 duplex 'auto'\n       set interfaces ethernet eth0 hw-id '08:00:27:50:5e:19'\n       set interfaces ethernet eth0 smp_affinity 'auto'\n       set interfaces ethernet eth0 speed 'auto'\n       set interfaces ethernet eth1 description 'Configured by Ansible'\n       set interfaces ethernet eth1 duplex 'auto'\n       set interfaces ethernet eth1 mtu '1500'\n       set interfaces ethernet eth1 speed 'auto'\n       set interfaces ethernet eth1 vif 200 description 'VIF - 200'\n       set interfaces ethernet eth2 description 'Configured by Ansible'\n       set interfaces ethernet eth2 duplex 'auto'\n       set interfaces ethernet eth2 mtu '1500'\n       set interfaces ethernet eth2 speed 'auto'\n       set interfaces ethernet eth2 vif 200 description 'VIF - 200'\"\n    state: parsed\n#\n#\n# -------------------------\n# Module Execution Result\n# -------------------------\n#\n#\n# \"parsed\": [\n#         {\n#             \"description\": \"Configured by Ansible\",\n#             \"duplex\": \"auto\",\n#             \"enabled\": true,\n#             \"mtu\": 1500,\n#             \"name\": \"eth2\",\n#             \"speed\": \"auto\",\n#             \"vifs\": [\n#                 {\n#                     \"description\": \"VIF - 200\",\n#                     \"enabled\": true,\n#                     \"vlan_id\": 200\n#                 }\n#             ]\n#         },\n#         {\n#             \"description\": \"Configured by Ansible\",\n#             \"duplex\": \"auto\",\n#             \"enabled\": true,\n#             \"mtu\": 1500,\n#             \"name\": \"eth1\",\n#             \"speed\": \"auto\",\n#             \"vifs\": [\n#                 {\n#                     \"description\": \"VIF - 200\",\n#                     \"enabled\": true,\n#                     \"vlan_id\": 200\n#                 }\n#             ]\n#         },\n#         {\n#             \"duplex\": \"auto\",\n#             \"enabled\": true,\n#             \"name\": \"eth0\",\n#             \"speed\": \"auto\"\n#         }\n#     ]\n\n\n",
        "metadata": null,
        "return": {
            "after": {
                "description": "The configuration as structured data after module completion.",
                "returned": "when changed",
                "sample": "The configuration returned will always be in the same format\n of the parameters above.\n",
                "type": "list"
            },
            "before": {
                "description": "The configuration as structured data prior to module invocation.",
                "returned": "always",
                "sample": "The configuration returned will always be in the same format\n of the parameters above.\n",
                "type": "list"
            },
            "commands": {
                "description": "The set of commands pushed to the remote device.",
                "returned": "always",
                "sample": [
                    "set interfaces ethernet eth1 mtu 1200",
                    "set interfaces ethernet eth2 vif 100 description VIF 100"
                ],
                "type": "list"
            }
        }
    }
}
