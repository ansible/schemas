{
    "cisco.nxos.nxos_bgp_global": {
        "doc": {
            "author": "Nilashish Chakraborty (@NilashishC)",
            "collection": "cisco.nxos",
            "description": [
                "This module manages global BGP configuration on devices running Cisco NX-OS."
            ],
            "filename": "/Users/ssbarnea/.pyenv/versions/3.9.2/lib/python3.9/site-packages/ansible_collections/cisco/nxos/plugins/modules/nxos_bgp_global.py",
            "has_action": true,
            "module": "nxos_bgp_global",
            "notes": [
                "Tested against NX-OS 9.3.6.",
                "This module works with connection C(network_cli) and C(httpapi)."
            ],
            "options": {
                "config": {
                    "description": "A list of BGP process configuration.",
                    "suboptions": {
                        "affinity_group": {
                            "description": "Configure an affinity group.",
                            "suboptions": {
                                "group_id": {
                                    "description": "Affinity Group ID.",
                                    "type": "int"
                                }
                            },
                            "type": "dict"
                        },
                        "as_number": {
                            "description": "Autonomous System Number of the router.",
                            "type": "str"
                        },
                        "bestpath": {
                            "description": "Define the default bestpath selection algorithm.",
                            "suboptions": {
                                "always_compare_med": {
                                    "description": "Compare MED on paths from different AS.",
                                    "type": "bool"
                                },
                                "as_path": {
                                    "description": "AS-Path.",
                                    "suboptions": {
                                        "ignore": {
                                            "description": "Ignore AS-Path during bestpath selection.",
                                            "type": "bool"
                                        },
                                        "multipath_relax": {
                                            "description": "Relax AS-Path restriction when choosing multipaths.",
                                            "type": "bool"
                                        }
                                    },
                                    "type": "dict"
                                },
                                "compare_neighborid": {
                                    "description": "When more paths are available than max path config, use neighborid as tie-breaker.",
                                    "type": "bool"
                                },
                                "compare_routerid": {
                                    "description": "Compare router-id for identical EBGP paths.",
                                    "type": "bool"
                                },
                                "cost_community_ignore": {
                                    "description": "Ignore cost communities in bestpath selection.",
                                    "type": "bool"
                                },
                                "igp_metric_ignore": {
                                    "description": "Ignore IGP metric for next-hop during bestpath selection.",
                                    "type": "bool"
                                },
                                "med": {
                                    "description": "MED",
                                    "suboptions": {
                                        "confed": {
                                            "description": "Compare MED only from paths originated from within a confederation.",
                                            "type": "bool"
                                        },
                                        "missing_as_worst": {
                                            "description": "Treat missing MED as highest MED.",
                                            "type": "bool"
                                        },
                                        "non_deterministic": {
                                            "description": "Not always pick the best-MED path among paths from same AS.",
                                            "type": "bool"
                                        }
                                    },
                                    "type": "dict"
                                }
                            },
                            "type": "dict"
                        },
                        "cluster_id": {
                            "description": "Configure Route Reflector Cluster-ID.",
                            "type": "str"
                        },
                        "confederation": {
                            "description": "AS confederation parameters.",
                            "suboptions": {
                                "identifier": {
                                    "description": "Set routing domain confederation AS.",
                                    "type": "str"
                                },
                                "peers": {
                                    "description": "Peer ASs in BGP confederation.",
                                    "elements": "str",
                                    "type": "list"
                                }
                            },
                            "type": "dict"
                        },
                        "disable_policy_batching": {
                            "description": "Disable batching evaluation of outbound policy for a peer.",
                            "suboptions": {
                                "ipv4": {
                                    "description": "IPv4 address-family settings.",
                                    "suboptions": {
                                        "prefix_list": {
                                            "description": "Name of prefix-list to apply.",
                                            "type": "str"
                                        }
                                    },
                                    "type": "dict"
                                },
                                "ipv6": {
                                    "description": "IPv6 address-family settings.",
                                    "suboptions": {
                                        "prefix_list": {
                                            "description": "Name of prefix-list to apply.",
                                            "type": "str"
                                        }
                                    },
                                    "type": "dict"
                                },
                                "nexthop": {
                                    "description": "Batching based on nexthop.",
                                    "type": "bool"
                                },
                                "set": {
                                    "description": "Set policy batching.",
                                    "type": "bool"
                                }
                            },
                            "type": "dict"
                        },
                        "dynamic_med_interval": {
                            "description": "Sets the interval for dampening of med changes.",
                            "type": "int"
                        },
                        "enforce_first_as": {
                            "description": "Enforce neighbor AS is the first AS in AS-PATH attribute (EBGP).",
                            "type": "bool"
                        },
                        "enhanced_error": {
                            "description": "Enable BGP Enhanced error handling.",
                            "type": "bool"
                        },
                        "fabric_soo": {
                            "description": "Fabric site of origin.",
                            "type": "str"
                        },
                        "fast_external_fallover": {
                            "description": "Immediately reset the session if the link to a directly connected BGP peer goes down.",
                            "type": "bool"
                        },
                        "flush_routes": {
                            "description": "Flush routes in RIB upon controlled restart.",
                            "type": "bool"
                        },
                        "graceful_restart": {
                            "description": "Configure Graceful Restart functionality.",
                            "suboptions": {
                                "helper": {
                                    "description": "Configure Graceful Restart Helper mode functionality.",
                                    "type": "bool"
                                },
                                "restart_time": {
                                    "description": "Maximum time for restart advertised to peers.",
                                    "type": "int"
                                },
                                "set": {
                                    "description": "Enable graceful-restart.",
                                    "type": "bool"
                                },
                                "stalepath_time": {
                                    "description": "Maximum time to keep a restarting peer's stale routes.",
                                    "type": "int"
                                }
                            },
                            "type": "dict"
                        },
                        "graceful_shutdown": {
                            "description": "Graceful-shutdown for BGP protocol.",
                            "suboptions": {
                                "activate": {
                                    "description": "Send graceful-shutdown community on all routes.",
                                    "suboptions": {
                                        "route_map": {
                                            "description": "Apply route-map to modify attributes for outbound.",
                                            "type": "str"
                                        },
                                        "set": {
                                            "description": "Activiate graceful-shutdown.",
                                            "type": "bool"
                                        }
                                    },
                                    "type": "dict"
                                },
                                "aware": {
                                    "description": "Lower preference of routes carrying graceful-shutdown community.",
                                    "type": "bool"
                                }
                            },
                            "type": "dict"
                        },
                        "isolate": {
                            "description": "Isolate this router from BGP perspective.",
                            "suboptions": {
                                "include_local": {
                                    "description": "Withdraw both local and remote BGP routes.",
                                    "type": "bool"
                                },
                                "set": {
                                    "description": "Withdraw remote BGP routes to isolate this router.",
                                    "type": "bool"
                                }
                            },
                            "type": "dict"
                        },
                        "log_neighbor_changes": {
                            "description": "Log a message for neighbor up/down event.",
                            "type": "bool"
                        },
                        "maxas_limit": {
                            "description": "Allow AS-PATH attribute from EBGP neighbor imposing a limit on number of ASes.",
                            "type": "int"
                        },
                        "neighbor_down": {
                            "description": "Handle BGP neighbor down event, due to various reasons.",
                            "suboptions": {
                                "fib_accelerate": {
                                    "description": "Accelerate the hardware updates for IP/IPv6 adjacencies for neighbor.",
                                    "type": "bool"
                                }
                            },
                            "type": "dict"
                        },
                        "neighbors": {
                            "description": "Configure BGP neighbors.",
                            "elements": "dict",
                            "suboptions": {
                                "bmp_activate_server": {
                                    "description": "Specify server ID for activating BMP monitoring for the peer.",
                                    "type": "int"
                                },
                                "capability": {
                                    "description": "Capability.",
                                    "suboptions": {
                                        "suppress_4_byte_as": {
                                            "description": "Suppress 4-byte AS Capability.",
                                            "type": "bool"
                                        }
                                    },
                                    "type": "dict"
                                },
                                "description": {
                                    "description": "Neighbor specific descripion.",
                                    "type": "str"
                                },
                                "disable_connected_check": {
                                    "description": "Disable check for directly connected peer.",
                                    "type": "bool"
                                },
                                "dont_capability_negotiate": {
                                    "description": "Don't negotiate capability with this neighbor.",
                                    "type": "bool"
                                },
                                "dscp": {
                                    "description": "Set dscp value for tcp transport.",
                                    "type": "str"
                                },
                                "dynamic_capability": {
                                    "description": "Dynamic Capability",
                                    "type": "bool"
                                },
                                "ebgp_multihop": {
                                    "description": "Specify multihop TTL for remote peer.",
                                    "type": "int"
                                },
                                "graceful_shutdown": {
                                    "description": "Graceful-shutdown for this neighbor.",
                                    "suboptions": {
                                        "activate": {
                                            "description": "Send graceful-shutdown community.",
                                            "suboptions": {
                                                "route_map": {
                                                    "description": "Apply route-map to modify attributes for outbound.",
                                                    "type": "str"
                                                },
                                                "set": {
                                                    "description": "Set activate.",
                                                    "type": "bool"
                                                }
                                            },
                                            "type": "dict"
                                        }
                                    },
                                    "type": "dict"
                                },
                                "inherit": {
                                    "description": "Inherit a template.",
                                    "suboptions": {
                                        "peer": {
                                            "description": "Peer template to inherit.",
                                            "type": "str"
                                        },
                                        "peer_session": {
                                            "description": "Peer-session template to inherit.",
                                            "type": "str"
                                        }
                                    },
                                    "type": "dict"
                                },
                                "local_as": {
                                    "description": "Specify the local-as number for the eBGP neighbor.",
                                    "type": "str"
                                },
                                "log_neighbor_changes": {
                                    "description": "Log message for neighbor up/down event.",
                                    "suboptions": {
                                        "disable": {
                                            "description": [
                                                "Disable logging of neighbor up/down event."
                                            ],
                                            "type": "bool"
                                        },
                                        "set": {
                                            "description": [
                                                "Set log-neighbor-changes."
                                            ],
                                            "type": "bool"
                                        }
                                    },
                                    "type": "dict"
                                },
                                "low_memory": {
                                    "description": "Behaviour in low memory situations.",
                                    "suboptions": {
                                        "exempt": {
                                            "description": "Do not shutdown this peer when under memory pressure.",
                                            "type": "bool"
                                        }
                                    },
                                    "type": "dict"
                                },
                                "neighbor_address": {
                                    "description": "IP address/Prefix of the neighbor or interface.",
                                    "required": true,
                                    "type": "str"
                                },
                                "neighbor_affinity_group": {
                                    "description": "Configure an affinity group.",
                                    "suboptions": {
                                        "group_id": {
                                            "description": "Affinity Group ID.",
                                            "type": "int"
                                        }
                                    },
                                    "type": "dict"
                                },
                                "password": {
                                    "description": "Configure a password for neighbor.",
                                    "suboptions": {
                                        "encryption": {
                                            "description": [
                                                "0 specifies an UNENCRYPTED neighbor password.",
                                                "3 specifies an 3DES ENCRYPTED neighbor password will follow.",
                                                "7 specifies a Cisco type 7  ENCRYPTED neighbor password will follow."
                                            ],
                                            "type": "int"
                                        },
                                        "key": {
                                            "description": "Authentication password.",
                                            "type": "str"
                                        }
                                    },
                                    "type": "dict"
                                },
                                "path_attribute": {
                                    "description": "BGP path attribute optional filtering.",
                                    "elements": "dict",
                                    "suboptions": {
                                        "action": {
                                            "choices": [
                                                "discard",
                                                "treat-as-withdraw"
                                            ],
                                            "description": "Action.",
                                            "type": "str"
                                        },
                                        "range": {
                                            "description": "Path attribute range.",
                                            "suboptions": {
                                                "end": {
                                                    "description": "Path attribute range end value.",
                                                    "type": "int"
                                                },
                                                "start": {
                                                    "description": "Path attribute range start value.",
                                                    "type": "int"
                                                }
                                            },
                                            "type": "dict"
                                        },
                                        "type": {
                                            "description": "Path attribute type",
                                            "type": "int"
                                        }
                                    },
                                    "type": "list"
                                },
                                "peer_type": {
                                    "choices": [
                                        "fabric-border-leaf",
                                        "fabric-external"
                                    ],
                                    "description": "Neighbor facing",
                                    "type": "str"
                                },
                                "remote_as": {
                                    "description": "Specify Autonomous System Number of the neighbor.",
                                    "type": "str"
                                },
                                "remove_private_as": {
                                    "description": "Remove private AS number from outbound updates.",
                                    "suboptions": {
                                        "all": {
                                            "description": "All.",
                                            "type": "bool"
                                        },
                                        "replace_as": {
                                            "description": "Replace.",
                                            "type": "bool"
                                        },
                                        "set": {
                                            "description": "Remove private AS.",
                                            "type": "bool"
                                        }
                                    },
                                    "type": "dict"
                                },
                                "shutdown": {
                                    "description": "Administratively shutdown this neighbor.",
                                    "type": "bool"
                                },
                                "timers": {
                                    "description": "Configure keepalive and hold timers.",
                                    "suboptions": {
                                        "holdtime": {
                                            "description": "Holdtime (seconds).",
                                            "type": "int"
                                        },
                                        "keepalive": {
                                            "description": "Keepalive interval (seconds).",
                                            "type": "int"
                                        }
                                    },
                                    "type": "dict"
                                },
                                "transport": {
                                    "description": "BGP transport connection.",
                                    "suboptions": {
                                        "connection_mode": {
                                            "description": "Specify type of connection.",
                                            "suboptions": {
                                                "passive": {
                                                    "description": "Allow passive connection setup only.",
                                                    "type": "bool"
                                                }
                                            },
                                            "type": "dict"
                                        }
                                    },
                                    "type": "dict"
                                },
                                "ttl_security": {
                                    "description": "Enable TTL Security Mechanism.",
                                    "suboptions": {
                                        "hops": {
                                            "description": "Specify hop count for remote peer.",
                                            "type": "int"
                                        }
                                    },
                                    "type": "dict"
                                },
                                "update_source": {
                                    "description": "Specify source of BGP session and updates.",
                                    "type": "str"
                                }
                            },
                            "type": "list"
                        },
                        "nexthop": {
                            "description": "Nexthop resolution options.",
                            "suboptions": {
                                "suppress_default_resolution": {
                                    "description": "Prohibit use of default route for nexthop address resolution.",
                                    "type": "bool"
                                }
                            },
                            "type": "dict"
                        },
                        "rd": {
                            "description": "Secondary Route Distinguisher for vxlan multisite border gateway.",
                            "suboptions": {
                                "dual": {
                                    "description": "Generate Secondary RD for all VRFs and L2VNIs.",
                                    "type": "bool"
                                },
                                "id": {
                                    "description": "Specify 2 byte value for ID.",
                                    "type": "int"
                                }
                            },
                            "type": "dict"
                        },
                        "reconnect_interval": {
                            "description": "Configure connection reconnect interval.",
                            "type": "int"
                        },
                        "router_id": {
                            "description": "Specify the IP address to use as router-id.",
                            "type": "str"
                        },
                        "shutdown": {
                            "description": "Administratively shutdown BGP protocol.",
                            "type": "bool"
                        },
                        "suppress_fib_pending": {
                            "description": "Advertise only routes that are programmed in hardware to peers.",
                            "type": "bool"
                        },
                        "timers": {
                            "description": "Configure bgp related timers.",
                            "suboptions": {
                                "bestpath_limit": {
                                    "description": "Configure timeout for first bestpath after restart.",
                                    "suboptions": {
                                        "always": {
                                            "description": "Configure update-delay-always option.",
                                            "type": "bool"
                                        },
                                        "timeout": {
                                            "description": "Bestpath timeout (seconds).",
                                            "type": "int"
                                        }
                                    },
                                    "type": "dict"
                                },
                                "bgp": {
                                    "description": "Configure different bgp keepalive and holdtimes.",
                                    "suboptions": {
                                        "holdtime": {
                                            "description": "Holdtime (seconds).",
                                            "type": "int"
                                        },
                                        "keepalive": {
                                            "description": "Keepalive interval (seconds).",
                                            "type": "int"
                                        }
                                    },
                                    "type": "dict"
                                },
                                "prefix_peer_timeout": {
                                    "description": "Prefix Peer timeout (seconds).",
                                    "type": "int"
                                },
                                "prefix_peer_wait": {
                                    "description": "Configure wait timer for a prefix peer.",
                                    "type": "int"
                                }
                            },
                            "type": "dict"
                        },
                        "vrfs": {
                            "description": "Virtual Router Context configurations.",
                            "elements": "dict",
                            "suboptions": {
                                "allocate_index": {
                                    "description": "Configure allocate-index.",
                                    "type": "int"
                                },
                                "bestpath": {
                                    "description": "Define the default bestpath selection algorithm.",
                                    "suboptions": {
                                        "always_compare_med": {
                                            "description": "Compare MED on paths from different AS.",
                                            "type": "bool"
                                        },
                                        "as_path": {
                                            "description": "AS-Path.",
                                            "suboptions": {
                                                "ignore": {
                                                    "description": "Ignore AS-Path during bestpath selection.",
                                                    "type": "bool"
                                                },
                                                "multipath_relax": {
                                                    "description": "Relax AS-Path restriction when choosing multipaths.",
                                                    "type": "bool"
                                                }
                                            },
                                            "type": "dict"
                                        },
                                        "compare_neighborid": {
                                            "description": "When more paths are available than max path config, use neighborid as tie-breaker.",
                                            "type": "bool"
                                        },
                                        "compare_routerid": {
                                            "description": "Compare router-id for identical EBGP paths.",
                                            "type": "bool"
                                        },
                                        "cost_community_ignore": {
                                            "description": "Ignore cost communities in bestpath selection.",
                                            "type": "bool"
                                        },
                                        "igp_metric_ignore": {
                                            "description": "Ignore IGP metric for next-hop during bestpath selection.",
                                            "type": "bool"
                                        },
                                        "med": {
                                            "description": "MED",
                                            "suboptions": {
                                                "confed": {
                                                    "description": "Compare MED only from paths originated from within a confederation.",
                                                    "type": "bool"
                                                },
                                                "missing_as_worst": {
                                                    "description": "Treat missing MED as highest MED.",
                                                    "type": "bool"
                                                },
                                                "non_deterministic": {
                                                    "description": "Not always pick the best-MED path among paths from same AS.",
                                                    "type": "bool"
                                                }
                                            },
                                            "type": "dict"
                                        }
                                    },
                                    "type": "dict"
                                },
                                "cluster_id": {
                                    "description": "Configure Route Reflector Cluster-ID.",
                                    "type": "str"
                                },
                                "confederation": {
                                    "description": "AS confederation parameters.",
                                    "suboptions": {
                                        "identifier": {
                                            "description": "Set routing domain confederation AS.",
                                            "type": "str"
                                        },
                                        "peers": {
                                            "description": "Peer ASs in BGP confederation.",
                                            "elements": "str",
                                            "type": "list"
                                        }
                                    },
                                    "type": "dict"
                                },
                                "graceful_restart": {
                                    "description": "Configure Graceful Restart functionality.",
                                    "suboptions": {
                                        "helper": {
                                            "description": "Configure Graceful Restart Helper mode functionality.",
                                            "type": "bool"
                                        },
                                        "restart_time": {
                                            "description": "Maximum time for restart advertised to peers.",
                                            "type": "int"
                                        },
                                        "set": {
                                            "description": "Enable graceful-restart.",
                                            "type": "bool"
                                        },
                                        "stalepath_time": {
                                            "description": "Maximum time to keep a restarting peer's stale routes.",
                                            "type": "int"
                                        }
                                    },
                                    "type": "dict"
                                },
                                "local_as": {
                                    "description": "Specify the local-as for this vrf.",
                                    "type": "str"
                                },
                                "log_neighbor_changes": {
                                    "description": "Log a message for neighbor up/down event.",
                                    "type": "bool"
                                },
                                "maxas_limit": {
                                    "description": "Allow AS-PATH attribute from EBGP neighbor imposing a limit on number of ASes.",
                                    "type": "int"
                                },
                                "neighbor_down": {
                                    "description": "Handle BGP neighbor down event, due to various reasons.",
                                    "suboptions": {
                                        "fib_accelerate": {
                                            "description": "Accelerate the hardware updates for IP/IPv6 adjacencies for neighbor.",
                                            "type": "bool"
                                        }
                                    },
                                    "type": "dict"
                                },
                                "neighbors": {
                                    "description": "Configure BGP neighbors.",
                                    "elements": "dict",
                                    "suboptions": {
                                        "bmp_activate_server": {
                                            "description": "Specify server ID for activating BMP monitoring for the peer.",
                                            "type": "int"
                                        },
                                        "capability": {
                                            "description": "Capability.",
                                            "suboptions": {
                                                "suppress_4_byte_as": {
                                                    "description": "Suppress 4-byte AS Capability.",
                                                    "type": "bool"
                                                }
                                            },
                                            "type": "dict"
                                        },
                                        "description": {
                                            "description": "Neighbor specific descripion.",
                                            "type": "str"
                                        },
                                        "disable_connected_check": {
                                            "description": "Disable check for directly connected peer.",
                                            "type": "bool"
                                        },
                                        "dont_capability_negotiate": {
                                            "description": "Don't negotiate capability with this neighbor.",
                                            "type": "bool"
                                        },
                                        "dscp": {
                                            "description": "Set dscp value for tcp transport.",
                                            "type": "str"
                                        },
                                        "dynamic_capability": {
                                            "description": "Dynamic Capability",
                                            "type": "bool"
                                        },
                                        "ebgp_multihop": {
                                            "description": "Specify multihop TTL for remote peer.",
                                            "type": "int"
                                        },
                                        "graceful_shutdown": {
                                            "description": "Graceful-shutdown for this neighbor.",
                                            "suboptions": {
                                                "activate": {
                                                    "description": "Send graceful-shutdown community.",
                                                    "suboptions": {
                                                        "route_map": {
                                                            "description": "Apply route-map to modify attributes for outbound.",
                                                            "type": "str"
                                                        },
                                                        "set": {
                                                            "description": "Set activate.",
                                                            "type": "bool"
                                                        }
                                                    },
                                                    "type": "dict"
                                                }
                                            },
                                            "type": "dict"
                                        },
                                        "inherit": {
                                            "description": "Inherit a template.",
                                            "suboptions": {
                                                "peer": {
                                                    "description": "Peer template to inherit.",
                                                    "type": "str"
                                                },
                                                "peer_session": {
                                                    "description": "Peer-session template to inherit.",
                                                    "type": "str"
                                                }
                                            },
                                            "type": "dict"
                                        },
                                        "local_as": {
                                            "description": "Specify the local-as number for the eBGP neighbor.",
                                            "type": "str"
                                        },
                                        "log_neighbor_changes": {
                                            "description": "Log message for neighbor up/down event.",
                                            "suboptions": {
                                                "disable": {
                                                    "description": [
                                                        "Disable logging of neighbor up/down event."
                                                    ],
                                                    "type": "bool"
                                                },
                                                "set": {
                                                    "description": [
                                                        "Set log-neighbor-changes."
                                                    ],
                                                    "type": "bool"
                                                }
                                            },
                                            "type": "dict"
                                        },
                                        "low_memory": {
                                            "description": "Behaviour in low memory situations.",
                                            "suboptions": {
                                                "exempt": {
                                                    "description": "Do not shutdown this peer when under memory pressure.",
                                                    "type": "bool"
                                                }
                                            },
                                            "type": "dict"
                                        },
                                        "neighbor_address": {
                                            "description": "IP address/Prefix of the neighbor or interface.",
                                            "required": true,
                                            "type": "str"
                                        },
                                        "neighbor_affinity_group": {
                                            "description": "Configure an affinity group.",
                                            "suboptions": {
                                                "group_id": {
                                                    "description": "Affinity Group ID.",
                                                    "type": "int"
                                                }
                                            },
                                            "type": "dict"
                                        },
                                        "password": {
                                            "description": "Configure a password for neighbor.",
                                            "suboptions": {
                                                "encryption": {
                                                    "description": [
                                                        "0 specifies an UNENCRYPTED neighbor password.",
                                                        "3 specifies an 3DES ENCRYPTED neighbor password will follow.",
                                                        "7 specifies a Cisco type 7  ENCRYPTED neighbor password will follow."
                                                    ],
                                                    "type": "int"
                                                },
                                                "key": {
                                                    "description": "Authentication password.",
                                                    "type": "str"
                                                }
                                            },
                                            "type": "dict"
                                        },
                                        "path_attribute": {
                                            "description": "BGP path attribute optional filtering.",
                                            "elements": "dict",
                                            "suboptions": {
                                                "action": {
                                                    "choices": [
                                                        "discard",
                                                        "treat-as-withdraw"
                                                    ],
                                                    "description": "Action.",
                                                    "type": "str"
                                                },
                                                "range": {
                                                    "description": "Path attribute range.",
                                                    "suboptions": {
                                                        "end": {
                                                            "description": "Path attribute range end value.",
                                                            "type": "int"
                                                        },
                                                        "start": {
                                                            "description": "Path attribute range start value.",
                                                            "type": "int"
                                                        }
                                                    },
                                                    "type": "dict"
                                                },
                                                "type": {
                                                    "description": "Path attribute type",
                                                    "type": "int"
                                                }
                                            },
                                            "type": "list"
                                        },
                                        "peer_type": {
                                            "choices": [
                                                "fabric-border-leaf",
                                                "fabric-external"
                                            ],
                                            "description": "Neighbor facing",
                                            "type": "str"
                                        },
                                        "remote_as": {
                                            "description": "Specify Autonomous System Number of the neighbor.",
                                            "type": "str"
                                        },
                                        "remove_private_as": {
                                            "description": "Remove private AS number from outbound updates.",
                                            "suboptions": {
                                                "all": {
                                                    "description": "All.",
                                                    "type": "bool"
                                                },
                                                "replace_as": {
                                                    "description": "Replace.",
                                                    "type": "bool"
                                                },
                                                "set": {
                                                    "description": "Remove private AS.",
                                                    "type": "bool"
                                                }
                                            },
                                            "type": "dict"
                                        },
                                        "shutdown": {
                                            "description": "Administratively shutdown this neighbor.",
                                            "type": "bool"
                                        },
                                        "timers": {
                                            "description": "Configure keepalive and hold timers.",
                                            "suboptions": {
                                                "holdtime": {
                                                    "description": "Holdtime (seconds).",
                                                    "type": "int"
                                                },
                                                "keepalive": {
                                                    "description": "Keepalive interval (seconds).",
                                                    "type": "int"
                                                }
                                            },
                                            "type": "dict"
                                        },
                                        "transport": {
                                            "description": "BGP transport connection.",
                                            "suboptions": {
                                                "connection_mode": {
                                                    "description": "Specify type of connection.",
                                                    "suboptions": {
                                                        "passive": {
                                                            "description": "Allow passive connection setup only.",
                                                            "type": "bool"
                                                        }
                                                    },
                                                    "type": "dict"
                                                }
                                            },
                                            "type": "dict"
                                        },
                                        "ttl_security": {
                                            "description": "Enable TTL Security Mechanism.",
                                            "suboptions": {
                                                "hops": {
                                                    "description": "Specify hop count for remote peer.",
                                                    "type": "int"
                                                }
                                            },
                                            "type": "dict"
                                        },
                                        "update_source": {
                                            "description": "Specify source of BGP session and updates.",
                                            "type": "str"
                                        }
                                    },
                                    "type": "list"
                                },
                                "reconnect_interval": {
                                    "description": "Configure connection reconnect interval.",
                                    "type": "int"
                                },
                                "router_id": {
                                    "description": "Specify the IP address to use as router-id.",
                                    "type": "str"
                                },
                                "timers": {
                                    "description": "Configure bgp related timers.",
                                    "suboptions": {
                                        "bestpath_limit": {
                                            "description": "Configure timeout for first bestpath after restart.",
                                            "suboptions": {
                                                "always": {
                                                    "description": "Configure update-delay-always option.",
                                                    "type": "bool"
                                                },
                                                "timeout": {
                                                    "description": "Bestpath timeout (seconds).",
                                                    "type": "int"
                                                }
                                            },
                                            "type": "dict"
                                        },
                                        "bgp": {
                                            "description": "Configure different bgp keepalive and holdtimes.",
                                            "suboptions": {
                                                "holdtime": {
                                                    "description": "Holdtime (seconds).",
                                                    "type": "int"
                                                },
                                                "keepalive": {
                                                    "description": "Keepalive interval (seconds).",
                                                    "type": "int"
                                                }
                                            },
                                            "type": "dict"
                                        },
                                        "prefix_peer_timeout": {
                                            "description": "Prefix Peer timeout (seconds).",
                                            "type": "int"
                                        },
                                        "prefix_peer_wait": {
                                            "description": "Configure wait timer for a prefix peer.",
                                            "type": "int"
                                        }
                                    },
                                    "type": "dict"
                                },
                                "vrf": {
                                    "description": "VRF name.",
                                    "type": "str"
                                }
                            },
                            "type": "list"
                        }
                    },
                    "type": "dict"
                },
                "running_config": {
                    "description": [
                        "This option is used only with state I(parsed).",
                        "The value of this option should be the output received from the NX-OS device by executing the command B(show running-config | section '^router bgp').",
                        "The state I(parsed) reads the configuration from C(running_config) option and transforms it into Ansible structured data as per the resource module's argspec and the value is then returned in the I(parsed) key within the result."
                    ],
                    "type": "str"
                },
                "state": {
                    "choices": [
                        "merged",
                        "replaced",
                        "deleted",
                        "purged",
                        "parsed",
                        "gathered",
                        "rendered"
                    ],
                    "default": "merged",
                    "description": [
                        "The state the configuration should be left in.",
                        "State I(purged) removes all the BGP configurations from the target device. Use caution with this state.",
                        "State I(deleted) only removes BGP attributes that this modules manages and does not negate the BGP process completely. Thereby, preserving address-family related configurations under BGP context.",
                        "Running states I(deleted) and I(replaced) will result in an error if there are address-family configuration lines present under a neighbor, or a vrf context that is to be removed. Please use the M(cisco.nxos.nxos_bgp_af) or M(cisco.nxos.nxos_bgp_neighbor_af) modules for prior cleanup.",
                        "Refer to examples for more details."
                    ],
                    "type": "str"
                }
            },
            "short_description": "BGP Global resource module.",
            "version_added": "1.4.0",
            "version_added_collection": "cisco.nxos"
        },
        "examples": "\n# Using merged\n\n# Before state:\n# -------------\n# Nexus9000v# show running-config | section \"^router bgp\"\n# Nexus9000v#\n\n- name: Merge the provided configuration with the exisiting running configuration\n  cisco.nxos.nxos_bgp_global:\n    config:\n      as_number: 65563\n      router_id: 192.168.1.1\n      bestpath:\n        as_path:\n          multipath_relax: True\n        compare_neighborid: True\n        cost_community_ignore: True\n      confederation:\n        identifier: 42\n        peers:\n          - 65020\n          - 65030\n          - 65040\n      log_neighbor_changes: True\n      maxas_limit: 20\n      neighbors:\n        - neighbor_address: 192.168.1.100\n          neighbor_affinity_group:\n            group_id: 160\n          bmp_activate_server: 1\n          remote_as: 65563\n          description: NBR-1\n          low_memory:\n            exempt: True\n        - neighbor_address: 192.168.1.101\n          remote_as: 65563\n          password:\n            encryption: 7\n            key: 12090404011C03162E\n      neighbor_down:\n        fib_accelerate: True\n      vrfs:\n        - vrf: site-1\n          allocate_index: 5000\n          local_as: 200\n          log_neighbor_changes: True\n          neighbors:\n            - neighbor_address: 198.51.100.1\n              description: site-1-nbr-1\n              password:\n                encryption: 3\n                key: 13D4D3549493D2877B1DC116EE27A6BE\n              remote_as: 65562\n            - neighbor_address: 198.51.100.2\n              remote_as: 65562\n              description: site-1-nbr-2\n        - vrf: site-2\n          local_as: 300\n          log_neighbor_changes: True\n          neighbors:\n            - neighbor_address: 203.0.113.2\n              description: site-2-nbr-1\n              password:\n                encryption: 3\n                key: AF92F4C16A0A0EC5BDF56CF58BC030F6\n              remote_as: 65568\n          neighbor_down:\n            fib_accelerate: True\n\n# Task output\n# -------------\n# before: {}\n#\n# commands:\n#  - router bgp 65563\n#  - bestpath as-path multipath-relax\n#  - bestpath compare-neighborid\n#  - bestpath cost-community ignore\n#  - confederation identifier 42\n#  - log-neighbor-changes\n#  - maxas-limit 20\n#  - neighbor-down fib-accelerate\n#  - router-id 192.168.1.1\n#  - confederation peers 65020 65030 65040\n#  - neighbor 192.168.1.100\n#  - remote-as 65563\n#  - affinity-group 160\n#  - bmp-activate-server 1\n#  - description NBR-1\n#  - low-memory exempt\n#  - neighbor 192.168.1.101\n#  - remote-as 65563\n#  - password 7 12090404011C03162E\n#  - vrf site-1\n#  - allocate-index 5000\n#  - local-as 200\n#  - log-neighbor-changes\n#  - neighbor 198.51.100.1\n#  - remote-as 65562\n#  - description site-1-nbr-1\n#  - password 3 13D4D3549493D2877B1DC116EE27A6BE\n#  - neighbor 198.51.100.2\n#  - remote-as 65562\n#  - description site-1-nbr-2\n#  - vrf site-2\n#  - local-as 300\n#  - log-neighbor-changes\n#  - neighbor-down fib-accelerate\n#  - neighbor 203.0.113.2\n#  - remote-as 65568\n#  - description site-2-nbr-1\n#  - password 3 AF92F4C16A0A0EC5BDF56CF58BC030F6\n#\n# after:\n#    as_number: '65563'\n#    bestpath:\n#      as_path:\n#        multipath_relax: true\n#      compare_neighborid: true\n#      cost_community_ignore: true\n#    confederation:\n#      identifier: '42'\n#      peers:\n#      - '65020'\n#      - '65030'\n#      - '65040'\n#    log_neighbor_changes: true\n#    maxas_limit: 20\n#    neighbor_down:\n#      fib_accelerate: true\n#    neighbors:\n#    - bmp_activate_server: 1\n#      description: NBR-1\n#      low_memory:\n#        exempt: true\n#      neighbor_address: 192.168.1.100\n#      neighbor_affinity_group:\n#        group_id: 160\n#      remote_as: '65563'\n#    - neighbor_address: 192.168.1.101\n#      password:\n#        encryption: 7\n#        key: 12090404011C03162E\n#      remote_as: '65563'\n#    router_id: 192.168.1.1\n#    vrfs:\n#    - allocate_index: 5000\n#      local_as: '200'\n#      log_neighbor_changes: true\n#      neighbors:\n#      - description: site-1-nbr-1\n#        neighbor_address: 198.51.100.1\n#        password:\n#          encryption: 3\n#          key: 13D4D3549493D2877B1DC116EE27A6BE\n#        remote_as: '65562'\n#      - description: site-1-nbr-2\n#        neighbor_address: 198.51.100.2\n#        remote_as: '65562'\n#      vrf: site-1\n#    - local_as: '300'\n#      log_neighbor_changes: true\n#      neighbor_down:\n#        fib_accelerate: true\n#      neighbors:\n#      - description: site-2-nbr-1\n#        neighbor_address: 203.0.113.2\n#        password:\n#          encryption: 3\n#          key: AF92F4C16A0A0EC5BDF56CF58BC030F6\n#        remote_as: '65568'\n#      vrf: site-2\n\n\n# After state:\n# -------------\n# Nexus9000v# show running-config | section \"^router bgp\"\n# router bgp 65563\n#   router-id 192.168.1.1\n#   confederation identifier 42\n#   confederation peers 65020 65030 65040\n#   bestpath as-path multipath-relax\n#   bestpath cost-community ignore\n#   bestpath compare-neighborid\n#   neighbor-down fib-accelerate\n#   maxas-limit 20\n#   log-neighbor-changes\n#   neighbor 192.168.1.100\n#     low-memory exempt\n#     bmp-activate-server 1\n#     remote-as 65563\n#     description NBR-1\n#     affinity-group 160\n#   neighbor 192.168.1.101\n#     remote-as 65563\n#     password 7 12090404011C03162E\n#   vrf site-1\n#     local-as 200\n#     log-neighbor-changes\n#     allocate-index 5000\n#     neighbor 198.51.100.1\n#       remote-as 65562\n#       description site-1-nbr-1\n#       password 3 13D4D3549493D2877B1DC116EE27A6BE\n#     neighbor 198.51.100.2\n#       remote-as 65562\n#       description site-1-nbr-2\n#   vrf site-2\n#     local-as 300\n#     neighbor-down fib-accelerate\n#     log-neighbor-changes\n#     neighbor 203.0.113.2\n#       remote-as 65568\n#       description site-2-nbr-1\n#       password 3 AF92F4C16A0A0EC5BDF56CF58BC030F6\n\n# Using replaced\n\n# Before state:\n# -------------\n# Nexus9000v# show running-config | section \"^router bgp\"\n# router bgp 65563\n#   router-id 192.168.1.1\n#   confederation identifier 42\n#   confederation peers 65020 65030 65040\n#   bestpath as-path multipath-relax\n#   bestpath cost-community ignore\n#   bestpath compare-neighborid\n#   neighbor-down fib-accelerate\n#   maxas-limit 20\n#   log-neighbor-changes\n#   neighbor 192.168.1.100\n#     low-memory exempt\n#     bmp-activate-server 1\n#     remote-as 65563\n#     description NBR-1\n#     affinity-group 160\n#   neighbor 192.168.1.101\n#     remote-as 65563\n#     password 7 12090404011C03162E\n#   vrf site-1\n#     local-as 200\n#     log-neighbor-changes\n#     allocate-index 5000\n#     neighbor 198.51.100.1\n#       remote-as 65562\n#       description site-1-nbr-1\n#       password 3 13D4D3549493D2877B1DC116EE27A6BE\n#     neighbor 198.51.100.2\n#       remote-as 65562\n#       description site-1-nbr-2\n#   vrf site-2\n#     local-as 300\n#     neighbor-down fib-accelerate\n#     log-neighbor-changes\n#     neighbor 203.0.113.2\n#       remote-as 65568\n#       description site-2-nbr-1\n#       password 3 AF92F4C16A0A0EC5BDF56CF58BC030F6\n\n- name: Replace BGP configuration with provided configuration\n  cisco.nxos.nxos_bgp_global:\n    config:\n      as_number: 65563\n      router_id: 192.168.1.1\n      bestpath:\n        compare_neighborid: True\n        cost_community_ignore: True\n      confederation:\n        identifier: 42\n        peers:\n          - 65020\n          - 65030\n          - 65050\n      maxas_limit: 40\n      neighbors:\n        - neighbor_address: 192.168.1.100\n          neighbor_affinity_group:\n            group_id: 160\n          bmp_activate_server: 1\n          remote_as: 65563\n          description: NBR-1\n          low_memory:\n            exempt: True\n      neighbor_down:\n        fib_accelerate: True\n      vrfs:\n        - vrf: site-2\n          local_as: 300\n          log_neighbor_changes: True\n          neighbors:\n            - neighbor_address: 203.0.113.2\n              password:\n                encryption: 7\n                key: 12090404011C03162E\n          neighbor_down:\n            fib_accelerate: True\n    state: replaced\n\n# Task output\n# -------------\n#  before:\n#    as_number: '65563'\n#    bestpath:\n#      as_path:\n#        multipath_relax: true\n#      compare_neighborid: true\n#      cost_community_ignore: true\n#    confederation:\n#      identifier: '42'\n#      peers:\n#      - '65020'\n#      - '65030'\n#      - '65040'\n#    log_neighbor_changes: true\n#    maxas_limit: 20\n#    neighbor_down:\n#      fib_accelerate: true\n#    neighbors:\n#    - bmp_activate_server: 1\n#      description: NBR-1\n#      low_memory:\n#        exempt: true\n#      neighbor_address: 192.168.1.100\n#      neighbor_affinity_group:\n#        group_id: 160\n#      remote_as: '65563'\n#    - neighbor_address: 192.168.1.101\n#      password:\n#        encryption: 7\n#        key: 12090404011C03162E\n#      remote_as: '65563'\n#    router_id: 192.168.1.1\n#    vrfs:\n#    - allocate_index: 5000\n#      local_as: '200'\n#      log_neighbor_changes: true\n#      neighbors:\n#      - description: site-1-nbr-1\n#        neighbor_address: 198.51.100.1\n#        password:\n#          encryption: 3\n#          key: 13D4D3549493D2877B1DC116EE27A6BE\n#        remote_as: '65562'\n#      - description: site-1-nbr-2\n#        neighbor_address: 198.51.100.2\n#        remote_as: '65562'\n#      vrf: site-1\n#    - local_as: '300'\n#      log_neighbor_changes: true\n#      neighbor_down:\n#        fib_accelerate: true\n#      neighbors:\n#      - description: site-2-nbr-1\n#        neighbor_address: 203.0.113.2\n#        password:\n#          encryption: 3\n#          key: AF92F4C16A0A0EC5BDF56CF58BC030F6\n#        remote_as: '65568'\n#      vrf: site-2\n#\n# commands:\n#  - router bgp 65563\n#  - no bestpath as-path multipath-relax\n#  - no log-neighbor-changes\n#  - maxas-limit 40\n#  - no confederation peers 65020 65030 65040\n#  - confederation peers 65020 65030 65050\n#  - no neighbor 192.168.1.101\n#  - vrf site-2\n#  - neighbor 203.0.113.2\n#  - no remote-as 65568\n#  - no description site-2-nbr-1\n#  - password 7 12090404011C03162E\n#  - no vrf site-1\n\n#  after:\n#    as_number: '65563'\n#    bestpath:\n#      compare_neighborid: true\n#      cost_community_ignore: true\n#    confederation:\n#      identifier: '42'\n#      peers:\n#      - '65020'\n#      - '65030'\n#      - '65050'\n#    maxas_limit: 40\n#    neighbor_down:\n#      fib_accelerate: true\n#    neighbors:\n#    - bmp_activate_server: 1\n#      description: NBR-1\n#      low_memory:\n#        exempt: true\n#      neighbor_address: 192.168.1.100\n#      neighbor_affinity_group:\n#        group_id: 160\n#      remote_as: '65563'\n#    router_id: 192.168.1.1\n#    vrfs:\n#    - local_as: '300'\n#      log_neighbor_changes: true\n#      neighbor_down:\n#        fib_accelerate: true\n#      neighbors:\n#      - neighbor_address: 203.0.113.2\n#        password:\n#          encryption: 7\n#          key: 12090404011C03162E\n#      vrf: site-2\n#\n# After state:\n# -------------\n# Nexus9000v# show running-config | section \"^router bgp\"\n# router bgp 65563\n#   router-id 192.168.1.1\n#   confederation identifier 42\n#   confederation peers 65020 65030 65050\n#   bestpath cost-community ignore\n#   bestpath compare-neighborid\n#   neighbor-down fib-accelerate\n#   maxas-limit 40\n#   neighbor 192.168.1.100\n#     low-memory exempt\n#     bmp-activate-server 1\n#     remote-as 65563\n#     description NBR-1\n#     affinity-group 160\n#   vrf site-2\n#     local-as 300\n#     neighbor-down fib-accelerate\n#     log-neighbor-changes\n#     neighbor 203.0.113.2\n#       password 7 12090404011C03162E\n\n# Using deleted\n\n# Before state:\n# -------------\n# Nexus9000v# show running-config | section \"^router bgp\"\n# router bgp 65563\n#   router-id 192.168.1.1\n#   confederation identifier 42\n#   confederation peers 65020 65030 65040\n#   bestpath as-path multipath-relax\n#   bestpath cost-community ignore\n#   bestpath compare-neighborid\n#   neighbor-down fib-accelerate\n#   maxas-limit 20\n#   log-neighbor-changes\n#   address-family ipv4 unicast\n#     default-metric 400\n#     suppress-inactive\n#     default-information originate\n#   address-family ipv6 multicast\n#     wait-igp-convergence\n#     redistribute eigrp eigrp-1 route-map site-1-rmap\n#   neighbor 192.168.1.100\n#     low-memory exempt\n#     bmp-activate-server 1\n#     remote-as 65563\n#     description NBR-1\n#     affinity-group 160\n#   neighbor 192.168.1.101\n#     remote-as 65563\n#     password 7 12090404011C03162E\n#   vrf site-1\n#     local-as 200\n#     log-neighbor-changes\n#     allocate-index 5000\n#     address-family ipv4 multicast\n#       maximum-paths 40\n#       dampen-igp-metric 1200\n#     neighbor 198.51.100.1\n#       remote-as 65562\n#       description site-1-nbr-1\n#       password 3 13D4D3549493D2877B1DC116EE27A6BE\n#     neighbor 198.51.100.2\n#       remote-as 65562\n#       description site-1-nbr-2\n#   vrf site-2\n#     local-as 300\n#     neighbor-down fib-accelerate\n#     log-neighbor-changes\n#     neighbor 203.0.113.2\n#       remote-as 65568\n#       description site-1-nbr-1\n#       password 3 AF92F4C16A0A0EC5BDF56CF58BC030F6\n\n- name: Delete BGP configurations handled by this module\n  cisco.nxos.nxos_bgp_global:\n    state: deleted\n\n# Task output\n# -------------\n\n# before:\n#    as_number: '65563'\n#    bestpath:\n#      as_path:\n#        multipath_relax: true\n#      compare_neighborid: true\n#      cost_community_ignore: true\n#    confederation:\n#      identifier: '42'\n#      peers:\n#      - '65020'\n#      - '65030'\n#      - '65040'\n#    log_neighbor_changes: true\n#    maxas_limit: 20\n#    neighbor_down:\n#      fib_accelerate: true\n#    neighbors:\n#    - bmp_activate_server: 1\n#      description: NBR-1\n#      low_memory:\n#        exempt: true\n#      neighbor_address: 192.168.1.100\n#      neighbor_affinity_group:\n#        group_id: 160\n#      remote_as: '65563'\n#    - neighbor_address: 192.168.1.101\n#      password:\n#        encryption: 7\n#        key: 12090404011C03162E\n#      remote_as: '65563'\n#    router_id: 192.168.1.1\n#    vrfs:\n#    - allocate_index: 5000\n#      local_as: '200'\n#      log_neighbor_changes: true\n#      neighbors:\n#      - description: site-1-nbr-1\n#        neighbor_address: 198.51.100.1\n#        password:\n#          encryption: 3\n#          key: 13D4D3549493D2877B1DC116EE27A6BE\n#        remote_as: '65562'\n#      - description: site-1-nbr-2\n#        neighbor_address: 198.51.100.2\n#        remote_as: '65562'\n#      vrf: site-1\n#    - local_as: '300'\n#      log_neighbor_changes: true\n#      neighbor_down:\n#        fib_accelerate: true\n#      neighbors:\n#      - description: site-1-nbr-1\n#        neighbor_address: 203.0.113.2\n#        password:\n#          encryption: 3\n#          key: AF92F4C16A0A0EC5BDF56CF58BC030F6\n#        remote_as: '65568'\n#      vrf: site-2\n#\n# commands:\n#   - router bgp 65563\n#   - no bestpath as-path multipath-relax\n#   - no bestpath compare-neighborid\n#   - no bestpath cost-community ignore\n#   - no confederation identifier 42\n#   - no log-neighbor-changes\n#   - no maxas-limit 20\n#   - no neighbor-down fib-accelerate\n#   - no router-id 192.168.1.1\n#   - no confederation peers 65020 65030 65040\n#   - no neighbor 192.168.1.100\n#   - no neighbor 192.168.1.101\n#   - no vrf site-1\n#   - no vrf site-2\n#\n#  after:\n#    as_number: '65563'\n#\n# After state:\n# -------------\n# Nexus9000v# show running-config | section \"^router bgp\"\n# router bgp 65563\n#   address-family ipv4 unicast\n#     default-metric 400\n#     suppress-inactive\n#     default-information originate\n#   address-family ipv6 multicast\n#     wait-igp-convergence\n#     redistribute eigrp eigrp-1 route-map site-1-rmap\n#\n\n# Using purged\n\n# Before state:\n# -------------\n# Nexus9000v# show running-config | section \"^router bgp\"\n# router bgp 65563\n#   router-id 192.168.1.1\n#   confederation identifier 42\n#   confederation peers 65020 65030 65040\n#   bestpath as-path multipath-relax\n#   bestpath cost-community ignore\n#   bestpath compare-neighborid\n#   neighbor-down fib-accelerate\n#   maxas-limit 20\n#   log-neighbor-changes\n#   address-family ipv4 unicast\n#     default-metric 400\n#     suppress-inactive\n#     default-information originate\n#   address-family ipv6 multicast\n#     wait-igp-convergence\n#     redistribute eigrp eigrp-1 route-map site-1-rmap\n#   neighbor 192.168.1.100\n#     low-memory exempt\n#     bmp-activate-server 1\n#     remote-as 65563\n#     description NBR-1\n#     affinity-group 160\n#   neighbor 192.168.1.101\n#     remote-as 65563\n#     password 7 12090404011C03162E\n#   vrf site-1\n#     local-as 200\n#     log-neighbor-changes\n#     allocate-index 5000\n#     address-family ipv4 multicast\n#       maximum-paths 40\n#       dampen-igp-metric 1200\n#     neighbor 198.51.100.1\n#       remote-as 65562\n#       description site-1-nbr-1\n#       password 3 13D4D3549493D2877B1DC116EE27A6BE\n#     neighbor 198.51.100.2\n#       remote-as 65562\n#       description site-1-nbr-2\n#   vrf site-2\n#     local-as 300\n#     neighbor-down fib-accelerate\n#     log-neighbor-changes\n#     neighbor 203.0.113.2\n#       remote-as 65568\n#       description site-1-nbr-1\n#       password 3 AF92F4C16A0A0EC5BDF56CF58BC030F6\n\n- name: Purge all BGP configurations from the device\n  cisco.nxos.nxos_bgp_global:\n    state: purged\n\n# Task output\n# -------------\n\n# before:\n#    as_number: '65563'\n#    bestpath:\n#      as_path:\n#        multipath_relax: true\n#      compare_neighborid: true\n#      cost_community_ignore: true\n#    confederation:\n#      identifier: '42'\n#      peers:\n#      - '65020'\n#      - '65030'\n#      - '65040'\n#    log_neighbor_changes: true\n#    maxas_limit: 20\n#    neighbor_down:\n#      fib_accelerate: true\n#    neighbors:\n#    - bmp_activate_server: 1\n#      description: NBR-1\n#      low_memory:\n#        exempt: true\n#      neighbor_address: 192.168.1.100\n#      neighbor_affinity_group:\n#        group_id: 160\n#      remote_as: '65563'\n#    - neighbor_address: 192.168.1.101\n#      password:\n#        encryption: 7\n#        key: 12090404011C03162E\n#      remote_as: '65563'\n#    router_id: 192.168.1.1\n#    vrfs:\n#    - allocate_index: 5000\n#      local_as: '200'\n#      log_neighbor_changes: true\n#      neighbors:\n#      - description: site-1-nbr-1\n#        neighbor_address: 198.51.100.1\n#        password:\n#          encryption: 3\n#          key: 13D4D3549493D2877B1DC116EE27A6BE\n#        remote_as: '65562'\n#      - description: site-1-nbr-2\n#        neighbor_address: 198.51.100.2\n#        remote_as: '65562'\n#      vrf: site-1\n#    - local_as: '300'\n#      log_neighbor_changes: true\n#      neighbor_down:\n#        fib_accelerate: true\n#      neighbors:\n#      - description: site-1-nbr-1\n#        neighbor_address: 203.0.113.2\n#        password:\n#          encryption: 3\n#          key: AF92F4C16A0A0EC5BDF56CF58BC030F6\n#        remote_as: '65568'\n#      vrf: site-2\n#\n# commands:\n#   - no router bgp 65563\n#\n#  after: {}\n#\n# After state:\n# -------------\n# Nexus9000v# show running-config | section \"^router bgp\"\n# Nexus9000v#\n\n# Using rendered\n\n- name: Render platform specific configuration lines (without connecting to the device)\n  cisco.nxos.nxos_bgp_global:\n    config:\n      as_number: 65563\n      router_id: 192.168.1.1\n      bestpath:\n        as_path:\n          multipath_relax: True\n        compare_neighborid: True\n        cost_community_ignore: True\n      confederation:\n        identifier: 42\n        peers:\n          - 65020\n          - 65030\n          - 65040\n      log_neighbor_changes: True\n      maxas_limit: 20\n      neighbors:\n        - neighbor_address: 192.168.1.100\n          neighbor_affinity_group:\n            group_id: 160\n          bmp_activate_server: 1\n          remote_as: 65563\n          description: NBR-1\n          low_memory:\n            exempt: True\n        - neighbor_address: 192.168.1.101\n          remote_as: 65563\n          password:\n            encryption: 7\n            key: 12090404011C03162E\n      neighbor_down:\n        fib_accelerate: True\n      vrfs:\n        - vrf: site-1\n          allocate_index: 5000\n          local_as: 200\n          log_neighbor_changes: True\n          neighbors:\n            - neighbor_address: 198.51.100.1\n              description: site-1-nbr-1\n              password:\n                encryption: 3\n                key: 13D4D3549493D2877B1DC116EE27A6BE\n              remote_as: 65562\n            - neighbor_address: 198.51.100.2\n              remote_as: 65562\n              description: site-1-nbr-2\n        - vrf: site-2\n          local_as: 300\n          log_neighbor_changes: True\n          neighbors:\n            - neighbor_address: 203.0.113.2\n              description: site-1-nbr-1\n              password:\n                encryption: 3\n                key: AF92F4C16A0A0EC5BDF56CF58BC030F6\n              remote_as: 65568\n          neighbor_down:\n            fib_accelerate: True\n\n# Task Output (redacted)\n# -----------------------\n# rendered:\n#   - router bgp 65563\n#   - bestpath as-path multipath-relax\n#   - bestpath compare-neighborid\n#   - bestpath cost-community ignore\n#   - confederation identifier 42\n#   - log-neighbor-changes\n#   - maxas-limit 20\n#   - neighbor-down fib-accelerate\n#   - router-id 192.168.1.1\n#   - confederation peers 65020 65030 65040\n#   - neighbor 192.168.1.100\n#   - remote-as 65563\n#   - affinity-group 160\n#   - bmp-activate-server 1\n#   - description NBR-1\n#   - low-memory exempt\n#   - neighbor 192.168.1.101\n#   - remote-as 65563\n#   - password 7 12090404011C03162E\n#   - vrf site-1\n#   - allocate-index 5000\n#   - local-as 200\n#   - log-neighbor-changes\n#   - neighbor 198.51.100.1\n#   - remote-as 65562\n#   - description site-1-nbr-1\n#   - password 3 13D4D3549493D2877B1DC116EE27A6BE\n#   - neighbor 198.51.100.2\n#   - remote-as 65562\n#   - description site-1-nbr-2\n#   - vrf site-2\n#   - local-as 300\n#   - log-neighbor-changes\n#   - neighbor-down fib-accelerate\n#   - neighbor 203.0.113.2\n#   - remote-as 65568\n#   - description site-1-nbr-1\n#   - password 3 AF92F4C16A0A0EC5BDF56CF58BC030F6\n\n# Using parsed\n\n# parsed.cfg\n# ------------\n# router bgp 65563\n#   router-id 192.168.1.1\n#   confederation identifier 42\n#   confederation peers 65020 65030 65040\n#   bestpath as-path multipath-relax\n#   bestpath cost-community ignore\n#   bestpath compare-neighborid\n#   neighbor-down fib-accelerate\n#   maxas-limit 20\n#   log-neighbor-changes\n#   neighbor 192.168.1.100\n#     low-memory exempt\n#     bmp-activate-server 1\n#     remote-as 65563\n#     description NBR-1\n#     affinity-group 160\n#   neighbor 192.168.1.101\n#     remote-as 65563\n#     password 7 12090404011C03162E\n#   vrf site-1\n#     local-as 200\n#     log-neighbor-changes\n#     allocate-index 5000\n#     neighbor 198.51.100.1\n#       remote-as 65562\n#       description site-1-nbr-1\n#       password 3 13D4D3549493D2877B1DC116EE27A6BE\n#     neighbor 198.51.100.2\n#       remote-as 65562\n#       description site-1-nbr-2\n#   vrf site-2\n#     local-as 300\n#     neighbor-down fib-accelerate\n#     log-neighbor-changes\n#     neighbor 203.0.113.2\n#       remote-as 65568\n#       description site-1-nbr-1\n#       password 3 AF92F4C16A0A0EC5BDF56CF58BC030F6\n\n- name: Parse externally provided BGP config\n  cisco.nxos.nxos_bgp_global:\n    running_config: \"{{ lookup('file', 'parsed.cfg') }}\"\n    state: parsed\n\n# Task output (redacted)\n# -----------------------\n#  parsed:\n#    as_number: '65563'\n#    bestpath:\n#      as_path:\n#        multipath_relax: true\n#      compare_neighborid: true\n#      cost_community_ignore: true\n#    confederation:\n#      identifier: '42'\n#      peers:\n#      - '65020'\n#      - '65030'\n#      - '65040'\n#    log_neighbor_changes: true\n#    maxas_limit: 20\n#    neighbor_down:\n#      fib_accelerate: true\n#    neighbors:\n#    - bmp_activate_server: 1\n#      description: NBR-1\n#      low_memory:\n#        exempt: true\n#      neighbor_address: 192.168.1.100\n#      neighbor_affinity_group:\n#        group_id: 160\n#      remote_as: '65563'\n#    - neighbor_address: 192.168.1.101\n#      password:\n#        encryption: 7\n#        key: 12090404011C03162E\n#      remote_as: '65563'\n#    router_id: 192.168.1.1\n#    vrfs:\n#    - allocate_index: 5000\n#      local_as: '200'\n#      log_neighbor_changes: true\n#      neighbors:\n#      - description: site-1-nbr-1\n#        neighbor_address: 198.51.100.1\n#        password:\n#          encryption: 3\n#          key: 13D4D3549493D2877B1DC116EE27A6BE\n#        remote_as: '65562'\n#      - description: site-1-nbr-2\n#        neighbor_address: 198.51.100.2\n#        remote_as: '65562'\n#      vrf: site-1\n#    - local_as: '300'\n#      log_neighbor_changes: true\n#      neighbor_down:\n#        fib_accelerate: true\n#      neighbors:\n#      - description: site-1-nbr-1\n#        neighbor_address: 203.0.113.2\n#        password:\n#          encryption: 3\n#          key: AF92F4C16A0A0EC5BDF56CF58BC030F6\n#        remote_as: '65568'\n#      vrf: site-2\n\n# Using gathered\n\n# existing config\n#\n# Nexus9000v# show running-config | section \"^router bgp\"\n# router bgp 65563\n#   router-id 192.168.1.1\n#   confederation identifier 42\n#   confederation peers 65020 65030 65050\n#   bestpath cost-community ignore\n#   bestpath compare-neighborid\n#   neighbor-down fib-accelerate\n#   maxas-limit 40\n#   neighbor 192.168.1.100\n#     low-memory exempt\n#     bmp-activate-server 1\n#     remote-as 65563\n#     description NBR-1\n#     affinity-group 160\n#   vrf site-1\n#   vrf site-2\n#     local-as 300\n#     neighbor-down fib-accelerate\n#     log-neighbor-changes\n#     neighbor 203.0.113.2\n#       password 7 12090404011C03162E\n\n- name: Gather BGP facts using gathered\n  cisco.nxos.nxos_bgp_global:\n    state: gathered\n\n# Task output (redacted)\n# -----------------------\n#  gathered:\n#    as_number: '65563'\n#    bestpath:\n#      compare_neighborid: true\n#      cost_community_ignore: true\n#    confederation:\n#      identifier: '42'\n#      peers:\n#      - '65020'\n#      - '65030'\n#      - '65050'\n#    maxas_limit: 40\n#    neighbor_down:\n#      fib_accelerate: true\n#    neighbors:\n#    - bmp_activate_server: 1\n#      description: NBR-1\n#      low_memory:\n#        exempt: true\n#      neighbor_address: 192.168.1.100\n#      neighbor_affinity_group:\n#        group_id: 160\n#      remote_as: '65563'\n#    router_id: 192.168.1.1\n#    vrfs:\n#    - vrf: site-1\n#    - local_as: '300'\n#      log_neighbor_changes: true\n#      neighbor_down:\n#        fib_accelerate: true\n#      neighbors:\n#      - neighbor_address: 203.0.113.2\n#        password:\n#          encryption: 7\n#          key: 12090404011C03162E\n#      vrf: site-2\n\n# Remove a neighbor having AF configurations with state replaced (will fail)\n\n# Before state:\n# -------------\n# Nexus9000v# show running-config | section \"^router bgp\"\n# router bgp 65536\n#   log-neighbor-changes\n#   maxas-limit 20\n#   router-id 198.51.100.2\n#   neighbor 203.0.113.2\n#     address-family ipv4 unicast\n#       next-hop-self\n#     remote-as 65538\n#     affinity-group 160\n#     description NBR-1\n#     low-memory exempt\n#   neighbor 192.0.2.1\n#     remote-as 65537\n#     password 7 12090404011C03162E\n\n- name: Remove a neighbor having AF configurations (should fail)\n  cisco.nxos.nxos_bgp_global:\n    config:\n      as_number: 65536\n      router_id: 198.51.100.2\n      maxas_limit: 20\n      log_neighbor_changes: True\n      neighbors:\n        - neighbor_address: 192.0.2.1\n          remote_as: 65537\n          password:\n            encryption: 7\n            key: 12090404011C03162E\n    state: replaced\n\n# Task output (redacted)\n# -----------------------\n# fatal: [Nexus9000v]: FAILED! => changed=false\n#    msg: Neighbor 203.0.113.2 has address-family configurations.\n#         Please use the nxos_bgp_neighbor_af module to remove those first.\n\n# Remove a VRF having AF configurations with state replaced (will fail)\n\n# Before state:\n# -------------\n# Nexus9000v# show running-config | section \"^router bgp\"\n# router bgp 65536\n#   log-neighbor-changes\n#   maxas-limit 20\n#   router-id 198.51.100.2\n#   neighbor 192.0.2.1\n#     remote-as 65537\n#     password 7 12090404011C03162E\n#   vrf site-1\n#     address-family ipv4 unicast\n#       default-information originate\n#     neighbor 203.0.113.2\n#       remote-as 65538\n#       affinity-group 160\n#       description NBR-1\n#       low-memory exempt\n#   vrf site-2\n#     neighbor-down fib-accelerate\n\n- name: Remove a VRF having AF configurations (should fail)\n  cisco.nxos.nxos_bgp_global:\n    config:\n      as_number: 65536\n      router_id: 198.51.100.2\n      maxas_limit: 20\n      log_neighbor_changes: True\n      neighbors:\n        - neighbor_address: 192.0.2.1\n          remote_as: 65537\n          password:\n            encryption: 7\n            key: 12090404011C03162E\n      vrfs:\n        - vrf: site-2\n          neighbor_down:\n            fib_accelerate: True\n    state: replaced\n\n# Task output (redacted)\n# -----------------------\n# fatal: [Nexus9000v]: FAILED! => changed=false\n#    msg: VRF site-1 has address-family configurations.\n#         Please use the nxos_bgp_af module to remove those first.\n",
        "metadata": null,
        "return": {
            "after": {
                "description": "The resulting configuration model invocation.",
                "returned": "when changed",
                "sample": "The configuration returned will always be in the same format\n of the parameters above.\n",
                "type": "dict"
            },
            "before": {
                "description": "The configuration prior to the model invocation.",
                "returned": "always",
                "sample": "The configuration returned will always be in the same format\n of the parameters above.\n",
                "type": "dict"
            },
            "commands": {
                "description": "The set of commands pushed to the remote device.",
                "returned": "always",
                "sample": [
                    "router bgp 65563",
                    "maxas-limit 20",
                    "router-id 192.168.1.1",
                    "confederation peers 65020 65030 65040",
                    "neighbor 192.168.1.100",
                    "remote-as 65563",
                    "affinity-group 160",
                    "bmp-activate-server 1",
                    "description NBR-1",
                    "low-memory exempt",
                    "vrf site-1",
                    "log-neighbor-changes",
                    "neighbor 198.51.100.1",
                    "remote-as 65562",
                    "description site-1-nbr-1",
                    "password 3 13D4D3549493D2877B1DC116EE27A6BE"
                ],
                "type": "list"
            }
        }
    }
}
